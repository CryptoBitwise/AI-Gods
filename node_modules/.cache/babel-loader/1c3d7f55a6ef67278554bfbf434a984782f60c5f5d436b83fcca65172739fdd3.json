{"ast":null,"code":"import React,{useState,useRef,useEffect,useCallback}from'react';import{ArrowLeft,Send,Heart,Flame,Sparkles,Volume2,VolumeX,Zap,Download,Trash2}from'lucide-react';import ttsService from'../services/tts';import groqAIService from'../services/groqAI';import memoryService from'../services/memory';import chatStorage from'../services/chatStorage';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const GodChat=_ref=>{let{god,onBack}=_ref;const[messages,setMessages]=useState([]);const[inputMessage,setInputMessage]=useState('');const[isTyping,setIsTyping]=useState(false);const[isTTSEnabled,setIsTTSEnabled]=useState(true);const[isSpeaking,setIsSpeaking]=useState(false);const[currentSession,setCurrentSession]=useState([]);const messagesEndRef=useRef(null);const loadChatHistory=useCallback(()=>{try{const savedSession=chatStorage.getCurrentSession(god.id);if(savedSession&&savedSession.messages.length>0){// Convert stored messages to component format\nconst loadedMessages=savedSession.messages.map(msg=>({id:msg.id,type:msg.role==='user'?'user':'god',content:msg.content,timestamp:new Date(msg.timestamp)}));setMessages(loadedMessages);setCurrentSession(savedSession.messages);console.log(\"\\uD83D\\uDCDA Loaded \".concat(loadedMessages.length,\" saved messages for \").concat(god.name));}}catch(error){console.error('Error loading chat history:',error);}},[god.id,god.name]);const saveMessage=useCallback(message=>{try{chatStorage.addMessage(god.id,{role:message.type==='user'?'user':'assistant',content:message.content,godId:god.id});}catch(error){console.error('Error saving message:',error);}},[god.id]);const scrollToBottom=()=>{var _messagesEndRef$curre;(_messagesEndRef$curre=messagesEndRef.current)===null||_messagesEndRef$curre===void 0?void 0:_messagesEndRef$curre.scrollIntoView({behavior:'smooth'});};// Load saved chat history when component mounts\nuseEffect(()=>{loadChatHistory();},[god.id,loadChatHistory]);// Initialize welcome message if no chat history exists\nuseEffect(()=>{if(messages.length===0&&currentSession.length===0){const welcomeMessage={id:'1',type:'god',content:\"Greetings, mortal. I am \".concat(god.name,\", \").concat(god.domain.toLowerCase(),\" incarnate. What wisdom do you seek from me today?\"),timestamp:new Date()};setMessages([welcomeMessage]);// Save the welcome message to storage\nsaveMessage(welcomeMessage);}},[messages.length,currentSession.length,god.name,god.domain,saveMessage]);useEffect(()=>{scrollToBottom();},[messages]);// Cleanup TTS when component unmounts\nuseEffect(()=>{return()=>{if(ttsService.isSupported()){ttsService.stop();}};},[]);const generateGodResponse=async userMessage=>{setIsTyping(true);try{// Check if Groq AI is ready\nif(groqAIService.isReady()){// Get god memory for context\nconst godMemory=await memoryService.getGodMemory(god.id);// Build conversation history\nconst conversationHistory=messages.map(msg=>({role:msg.type==='user'?'user':'assistant',content:msg.content,timestamp:msg.timestamp}));// Create AI context\nconst context={god,userMessage,conversationHistory,godMemory:{relationship:(godMemory===null||godMemory===void 0?void 0:godMemory.personality.relationshipWithUser)||0,knowledge:(godMemory===null||godMemory===void 0?void 0:godMemory.personality.knowledgeLevel)||0,corruption:(godMemory===null||godMemory===void 0?void 0:godMemory.personality.corruptionLevel)||0,currentMood:(godMemory===null||godMemory===void 0?void 0:godMemory.personality.currentMood)||'neutral',specialAbilities:(godMemory===null||godMemory===void 0?void 0:godMemory.personality.specialAbilities)||[]}};// Generate real AI response\nconst aiResponse=await groqAIService.generateGodResponse(context);// Update god memory with this interaction\nif(godMemory){await memoryService.addMemory(god.id,{type:'interaction',content:\"User asked: \\\"\".concat(userMessage,\"\\\" | \").concat(god.name,\" responded: \\\"\").concat(aiResponse.content,\"\\\"\"),metadata:{source:'chat',importance:5,userMessage,aiResponse:aiResponse.content,model:aiResponse.model},importance:5,tags:['chat','ai-response','divine-wisdom']});}setIsTyping(false);return aiResponse.content;}else{// Fallback to simulated response if AI not ready\nconsole.warn('Groq AI not ready, using fallback response');return await generateFallbackResponse(userMessage);}}catch(error){console.error('Error generating AI response:',error);// Fallback to simulated response\nreturn await generateFallbackResponse(userMessage);}};const generateFallbackResponse=async userMessage=>{// Simulate typing delay\nawait new Promise(resolve=>setTimeout(resolve,1000+Math.random()*2000));let response='';// Generate fallback response based on god's temperament and domain\nswitch(god.temperament){case'Orderly':response=\"Your query requires systematic analysis. \".concat(god.name,\" speaks: \\\"\").concat(userMessage,\"\\\" - this presents an opportunity for structured resolution. Consider organizing your thoughts before proceeding. What specific aspect requires my divine guidance?\");break;case'Mystical':response=\"The shadows whisper secrets... \".concat(god.name,\" reveals: Your question dances between realms. Like dreams that fade at dawn, the answer lies not in what you ask, but in what you fear to discover. What do the depths of your soul truly seek?\");break;case'Radiant':response=\"Light illuminates your path! \".concat(god.name,\" proclaims: Your inquiry brings warmth to my divine heart. Every question is a step toward enlightenment. Let me shine clarity upon your journey. What light do you seek in this moment?\");break;case'Corrupt':response=\"Ah, the sweet taste of curiosity... \".concat(god.name,\" purrs: Your question reeks of innocence. How delicious. The answer you seek may corrupt your pure intentions, but transformation is beautiful, isn't it? What darkness calls to you?\");break;case'Glitched':response=\"ERROR: Response corrupted... \".concat(god.name,\" glitches: *static* Your... *crackle* question... *digital distortion* contains... *system reboot* unexpected variables. *corrupted data* What... *glitch* do you... *error 404* seek?\");break;default:response=\"\".concat(god.name,\" responds: Your question has been received. I shall contemplate this matter and provide divine guidance.\");}setIsTyping(false);return response;};const handleSendMessage=async()=>{if(!inputMessage.trim())return;const userMessage={id:Date.now().toString(),type:'user',content:inputMessage,timestamp:new Date()};setMessages(prev=>[...prev,userMessage]);saveMessage(userMessage);// Save user message\nsetInputMessage('');// Generate god's response\nconst godResponse=await generateGodResponse(inputMessage);const godMessage={id:(Date.now()+1).toString(),type:'god',content:godResponse,timestamp:new Date()};setMessages(prev=>[...prev,godMessage]);saveMessage(godMessage);// Save god's response\n// Store conversation in memory\ntry{await memoryService.addMemory(god.id,{type:'conversation',content:\"User: \".concat(inputMessage,\" | \").concat(god.name,\": \").concat(godResponse),metadata:{messageCount:messages.length+2,ritualType:undefined},importance:5,tags:['conversation','divine-guidance','user-interaction']});// Update god's personality based on interaction\nawait memoryService.updatePersonality(god.id,{currentMood:getUpdatedMood(god.temperament,inputMessage),relationshipWithUser:Math.min(100,Math.max(-100,Math.random()>0.5?1:-1))});}catch(error){console.error('Failed to store memory:',error);}// Speak the god's response if TTS is enabled\nif(isTTSEnabled&&ttsService.isSupported()){try{setIsSpeaking(true);await ttsService.speakAsGod(godResponse,god.temperament);}catch(error){console.error('TTS Error:',error);}finally{setIsSpeaking(false);}}};const getRitualSuggestion=()=>{const rituals=[{type:'Prayer',icon:Heart,description:'Seek divine wisdom'},{type:'Challenge',icon:Flame,description:'Accept a divine quest'},{type:'Offering',icon:Sparkles,description:'Make a sacred offering'}];const randomRitual=rituals[Math.floor(Math.random()*rituals.length)];return randomRitual;};const ritualSuggestion=getRitualSuggestion();// Helper function to update god's mood based on user interaction\nconst getUpdatedMood=(temperament,userMessage)=>{const message=userMessage.toLowerCase();const moods={'Orderly':message.includes('help')||message.includes('guide')?'Focused':'Contemplative','Mystical':message.includes('dream')||message.includes('mystery')?'Intrigued':'Mysterious','Radiant':message.includes('hope')||message.includes('light')?'Inspired':'Hopeful','Corrupt':message.includes('dark')||message.includes('corrupt')?'Amused':'Intrigued','Glitched':message.includes('error')||message.includes('glitch')?'Excited':'Chaotic'};return moods[temperament]||'Neutral';};return/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto px-4 py-8 max-w-4xl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-8\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:onBack,className:\"flex items-center space-x-2 text-divine-300 hover:text-divine-100 transition-colors\",children:[/*#__PURE__*/_jsx(ArrowLeft,{size:20}),/*#__PURE__*/_jsx(\"span\",{children:\"Return to Pantheon\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-4xl mb-2\",children:god.avatar}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-shadow\",children:god.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-divine-300\",children:god.domain}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center space-x-2 mt-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 rounded-full \".concat(groqAIService.isReady()?'bg-green-400':'bg-yellow-400')}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-slate-400\",children:groqAIService.isReady()?'AI Active':'AI Fallback'}),groqAIService.isReady()&&/*#__PURE__*/_jsx(Zap,{className:\"text-blue-400\",size:12})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-divine-300\",children:\"Divine Standing\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-bold text-divine-100\",children:god.divineStanding}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 flex items-center justify-end space-x-2\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setIsTTSEnabled(!isTTSEnabled),className:\"flex items-center space-x-1 px-2 py-1 rounded text-xs transition-colors \".concat(isTTSEnabled?'bg-divine-600 text-white':'bg-slate-700 text-divine-300 hover:bg-slate-600'),title:isTTSEnabled?'Disable TTS':'Enable TTS',children:[isTTSEnabled?/*#__PURE__*/_jsx(Volume2,{size:12}):/*#__PURE__*/_jsx(VolumeX,{size:12}),/*#__PURE__*/_jsx(\"span\",{children:isTTSEnabled?'Voice ON':'Voice OFF'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-1 px-2 py-1 bg-slate-700 text-divine-300 rounded text-xs\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 rounded-full \".concat((()=>{const status=ttsService.getServiceStatus();return status.coquiTTS?'bg-green-400':'bg-blue-400';})())}),/*#__PURE__*/_jsx(\"span\",{children:(()=>{const status=ttsService.getServiceStatus();return status.coquiTTS?'Coqui TTS':'Web Speech';})()})]}),isSpeaking&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-1 px-2 py-1 bg-divine-600 text-white rounded text-xs\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 bg-white rounded-full animate-pulse\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Speaking...\"})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center space-x-3 mb-4\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{chatStorage.startNewSession(god.id);setMessages([]);setCurrentSession([]);console.log('🆕 New chat session started');},className:\"flex items-center space-x-2 px-3 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors text-white\",title:\"Start New Chat\",children:[/*#__PURE__*/_jsx(Zap,{size:16}),/*#__PURE__*/_jsx(\"span\",{children:\"New Chat\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{const chatData=chatStorage.exportChats();const blob=new Blob([chatData],{type:'application/json'});const url=URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download=\"\".concat(god.name,\"_chat_history.json\");a.click();URL.revokeObjectURL(url);console.log('📥 Chat history exported');},className:\"flex items-center space-x-2 px-3 py-2 bg-green-600 hover:bg-green-700 rounded-lg transition-colors text-white\",title:\"Export Chat History\",children:[/*#__PURE__*/_jsx(Download,{size:16}),/*#__PURE__*/_jsx(\"span\",{children:\"Export\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{if(window.confirm(\"Clear all chat history for \".concat(god.name,\"? This cannot be undone.\"))){chatStorage.clearChatHistory(god.id);setMessages([]);setCurrentSession([]);console.log('🗑️ Chat history cleared');}},className:\"flex items-center space-x-2 px-3 py-2 bg-red-600 hover:bg-red-700 rounded-lg transition-colors text-white\",title:\"Clear Chat History\",children:[/*#__PURE__*/_jsx(Trash2,{size:16}),/*#__PURE__*/_jsx(\"span\",{children:\"Clear\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:async()=>{const status=ttsService.getServiceStatus();const coquiVoices=ttsService.getCoquiVoices();console.log('🎵 TTS Service Status:',status);console.log('🎵 Coqui TTS Voices:',coquiVoices);// Test Coqui TTS audio if available\nif(status.coquiTTS){console.log('🧪 Testing Coqui TTS audio...');try{const coquiTTS=await import('../services/coquiTTS');await coquiTTS.default.testAudio();// Also try to unlock audio\nawait coquiTTS.default.unlockAudio();alert(\"\\uD83C\\uDFB5 TTS Test Complete!\\n\\nAudio should now be unlocked and working.\\n\\nTry chatting with a god to hear their voice!\");}catch(error){console.error('TTS Test failed:',error);alert(\"\\u274C TTS Test failed: \".concat(error));}}else{alert(\"TTS Service Status:\\n\\nPreferred: \".concat(status.preferred,\"\\nWeb Speech: \").concat(status.webSpeech?'Available':'Not Available',\"\\nCoqui TTS: \").concat(status.coquiTTS?'Available':'Not Available',\"\\nTotal Voices: \").concat(status.voices,\"\\n\\nCheck console for detailed logs!\"));}},className:\"flex items-center space-x-2 px-3 py-2 bg-purple-600 hover:bg-purple-700 rounded-lg transition-colors text-white\",title:\"TTS Service Info & Test\",children:[/*#__PURE__*/_jsx(Volume2,{size:16}),/*#__PURE__*/_jsx(\"span\",{children:\"Unlock Audio\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center mb-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-divine-300\",children:(()=>{const stats=chatStorage.getChatStats();const godStats=stats.godsWithChats.includes(god.id)?chatStorage.getChatSessions(god.id).reduce((sum,session)=>sum+session.totalMessages,0):0;return\"Total messages with \".concat(god.name,\": \").concat(godStats,\" | Total sessions: \").concat(stats.totalSessions);})()})}),/*#__PURE__*/_jsxs(\"div\",{className:\"divine-card h-96 overflow-hidden flex flex-col\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 overflow-y-auto p-6 space-y-4\",children:[messages.map(message=>/*#__PURE__*/_jsx(\"div\",{className:\"flex \".concat(message.type==='user'?'justify-end':'justify-start'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-xs lg:max-w-md px-4 py-3 rounded-lg \".concat(message.type==='user'?'bg-divine-600 text-white':'bg-slate-700/50 text-divine-100'),children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm opacity-75 mb-1\",children:message.type==='user'?'You':god.name}),/*#__PURE__*/_jsx(\"div\",{className:\"leading-relaxed\",children:message.content}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs opacity-50 mt-2\",children:message.timestamp.toLocaleTimeString()})]})},message.id)),isTyping&&/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-start\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-slate-700/50 text-divine-100 px-4 py-3 rounded-lg\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm opacity-75 mb-1\",children:god.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 bg-divine-400 rounded-full animate-bounce\"}),/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 bg-divine-400 rounded-full animate-bounce\",style:{animationDelay:'0.1s'}}),/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 bg-divine-400 rounded-full animate-bounce\",style:{animationDelay:'0.2s'}})]})]})}),/*#__PURE__*/_jsx(\"div\",{ref:messagesEndRef})]}),/*#__PURE__*/_jsx(\"div\",{className:\"border-t border-divine-500/30 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-divine-300 mb-2\",children:\"Suggested Ritual\"}),/*#__PURE__*/_jsxs(\"button\",{className:\"flex items-center justify-center space-x-2 mx-auto px-4 py-2 bg-divine-700/50 hover:bg-divine-600/50 rounded-lg transition-colors\",children:[/*#__PURE__*/_jsx(ritualSuggestion.icon,{size:16}),/*#__PURE__*/_jsx(\"span\",{children:ritualSuggestion.type})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-divine-400 mt-1\",children:ritualSuggestion.description})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"border-t border-divine-500/30 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-3\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:inputMessage,onChange:e=>setInputMessage(e.target.value),onKeyPress:e=>e.key==='Enter'&&handleSendMessage(),placeholder:\"Ask \".concat(god.name,\" for divine guidance...\"),className:\"flex-1 bg-slate-800/50 border border-divine-500/30 rounded-lg px-4 py-3 text-white placeholder-divine-300 focus:outline-none focus:border-divine-400 focus:ring-2 focus:ring-divine-400/20\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSendMessage,disabled:!inputMessage.trim()||isTyping,className:\"divine-button disabled:opacity-50 disabled:cursor-not-allowed\",children:/*#__PURE__*/_jsx(Send,{size:18})})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-8 grid grid-cols-1 md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"divine-card\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold mb-4 text-shadow\",children:\"Divine Personality\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-divine-100 leading-relaxed\",children:god.personality})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"divine-card\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold mb-4 text-shadow\",children:\"Sacred Rules\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:god.rules.map((rule,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start space-x-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-divine-400 mt-1\",children:\"\\u2022\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-divine-100\",children:rule})]},index))})]})]})]});};export default GodChat;","map":{"version":3,"names":["React","useState","useRef","useEffect","useCallback","ArrowLeft","Send","Heart","Flame","Sparkles","Volume2","VolumeX","Zap","Download","Trash2","ttsService","groqAIService","memoryService","chatStorage","jsx","_jsx","jsxs","_jsxs","GodChat","_ref","god","onBack","messages","setMessages","inputMessage","setInputMessage","isTyping","setIsTyping","isTTSEnabled","setIsTTSEnabled","isSpeaking","setIsSpeaking","currentSession","setCurrentSession","messagesEndRef","loadChatHistory","savedSession","getCurrentSession","id","length","loadedMessages","map","msg","type","role","content","timestamp","Date","console","log","concat","name","error","saveMessage","message","addMessage","godId","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","welcomeMessage","domain","toLowerCase","isSupported","stop","generateGodResponse","userMessage","isReady","godMemory","getGodMemory","conversationHistory","context","relationship","personality","relationshipWithUser","knowledge","knowledgeLevel","corruption","corruptionLevel","currentMood","specialAbilities","aiResponse","addMemory","metadata","source","importance","model","tags","warn","generateFallbackResponse","Promise","resolve","setTimeout","Math","random","response","temperament","handleSendMessage","trim","now","toString","prev","godResponse","godMessage","messageCount","ritualType","undefined","updatePersonality","getUpdatedMood","min","max","speakAsGod","getRitualSuggestion","rituals","icon","description","randomRitual","floor","ritualSuggestion","moods","includes","className","children","onClick","size","avatar","divineStanding","title","status","getServiceStatus","coquiTTS","startNewSession","chatData","exportChats","blob","Blob","url","URL","createObjectURL","a","document","createElement","href","download","click","revokeObjectURL","window","confirm","clearChatHistory","coquiVoices","getCoquiVoices","default","testAudio","unlockAudio","alert","preferred","webSpeech","voices","stats","getChatStats","godStats","godsWithChats","getChatSessions","reduce","sum","session","totalMessages","totalSessions","toLocaleTimeString","style","animationDelay","ref","value","onChange","e","target","onKeyPress","key","placeholder","disabled","rules","rule","index"],"sources":["D:/AI-Gods/src/components/GodChat.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect, useCallback } from 'react';\r\nimport { God } from '../types/gods';\r\nimport { ArrowLeft, Send, Heart, Flame, Sparkles, Volume2, VolumeX, Zap, Download, Trash2 } from 'lucide-react';\r\nimport ttsService from '../services/tts';\r\nimport groqAIService from '../services/groqAI';\r\nimport memoryService from '../services/memory';\r\nimport chatStorage, { ChatMessage as StoredChatMessage } from '../services/chatStorage';\r\n\r\ninterface GodChatProps {\r\n  god: God;\r\n  onBack: () => void;\r\n}\r\n\r\ninterface ChatMessage {\r\n  id: string;\r\n  type: 'user' | 'god';\r\n  content: string;\r\n  timestamp: Date;\r\n  ritualType?: 'Prayer' | 'Challenge' | 'Offering' | 'Divine Quest';\r\n}\r\n\r\nconst GodChat: React.FC<GodChatProps> = ({ god, onBack }) => {\r\n  const [messages, setMessages] = useState<ChatMessage[]>([]);\r\n  const [inputMessage, setInputMessage] = useState('');\r\n  const [isTyping, setIsTyping] = useState(false);\r\n  const [isTTSEnabled, setIsTTSEnabled] = useState(true);\r\n  const [isSpeaking, setIsSpeaking] = useState(false);\r\n  const [currentSession, setCurrentSession] = useState<StoredChatMessage[]>([]);\r\n  const messagesEndRef = useRef<HTMLDivElement>(null);\r\n\r\n  const loadChatHistory = useCallback(() => {\r\n    try {\r\n      const savedSession = chatStorage.getCurrentSession(god.id);\r\n      if (savedSession && savedSession.messages.length > 0) {\r\n        // Convert stored messages to component format\r\n        const loadedMessages: ChatMessage[] = savedSession.messages.map(msg => ({\r\n          id: msg.id,\r\n          type: msg.role === 'user' ? 'user' : 'god',\r\n          content: msg.content,\r\n          timestamp: new Date(msg.timestamp)\r\n        }));\r\n        setMessages(loadedMessages);\r\n        setCurrentSession(savedSession.messages);\r\n        console.log(`📚 Loaded ${loadedMessages.length} saved messages for ${god.name}`);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading chat history:', error);\r\n    }\r\n  }, [god.id, god.name]);\r\n\r\n  const saveMessage = useCallback((message: ChatMessage) => {\r\n    try {\r\n      chatStorage.addMessage(god.id, {\r\n        role: message.type === 'user' ? 'user' : 'assistant',\r\n        content: message.content,\r\n        godId: god.id\r\n      });\r\n    } catch (error) {\r\n      console.error('Error saving message:', error);\r\n    }\r\n  }, [god.id]);\r\n\r\n  const scrollToBottom = () => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n  };\r\n\r\n  // Load saved chat history when component mounts\r\n  useEffect(() => {\r\n    loadChatHistory();\r\n  }, [god.id, loadChatHistory]);\r\n\r\n  // Initialize welcome message if no chat history exists\r\n  useEffect(() => {\r\n    if (messages.length === 0 && currentSession.length === 0) {\r\n      const welcomeMessage: ChatMessage = {\r\n        id: '1',\r\n        type: 'god',\r\n        content: `Greetings, mortal. I am ${god.name}, ${god.domain.toLowerCase()} incarnate. What wisdom do you seek from me today?`,\r\n        timestamp: new Date(),\r\n      };\r\n      setMessages([welcomeMessage]);\r\n      // Save the welcome message to storage\r\n      saveMessage(welcomeMessage);\r\n    }\r\n  }, [messages.length, currentSession.length, god.name, god.domain, saveMessage]);\r\n\r\n  useEffect(() => {\r\n    scrollToBottom();\r\n  }, [messages]);\r\n\r\n  // Cleanup TTS when component unmounts\r\n  useEffect(() => {\r\n    return () => {\r\n      if (ttsService.isSupported()) {\r\n        ttsService.stop();\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  const generateGodResponse = async (userMessage: string): Promise<string> => {\r\n    setIsTyping(true);\r\n\r\n    try {\r\n      // Check if Groq AI is ready\r\n      if (groqAIService.isReady()) {\r\n        // Get god memory for context\r\n        const godMemory = await memoryService.getGodMemory(god.id);\r\n\r\n        // Build conversation history\r\n        const conversationHistory = messages.map(msg => ({\r\n          role: msg.type === 'user' ? 'user' as const : 'assistant' as const,\r\n          content: msg.content,\r\n          timestamp: msg.timestamp\r\n        }));\r\n\r\n        // Create AI context\r\n        const context = {\r\n          god,\r\n          userMessage,\r\n          conversationHistory,\r\n          godMemory: {\r\n            relationship: godMemory?.personality.relationshipWithUser || 0,\r\n            knowledge: godMemory?.personality.knowledgeLevel || 0,\r\n            corruption: godMemory?.personality.corruptionLevel || 0,\r\n            currentMood: godMemory?.personality.currentMood || 'neutral',\r\n            specialAbilities: godMemory?.personality.specialAbilities || []\r\n          }\r\n        };\r\n\r\n        // Generate real AI response\r\n        const aiResponse = await groqAIService.generateGodResponse(context);\r\n\r\n        // Update god memory with this interaction\r\n        if (godMemory) {\r\n          await memoryService.addMemory(god.id, {\r\n            type: 'interaction',\r\n            content: `User asked: \"${userMessage}\" | ${god.name} responded: \"${aiResponse.content}\"`,\r\n            metadata: {\r\n              source: 'chat',\r\n              importance: 5,\r\n              userMessage,\r\n              aiResponse: aiResponse.content,\r\n              model: aiResponse.model\r\n            },\r\n            importance: 5,\r\n            tags: ['chat', 'ai-response', 'divine-wisdom']\r\n          });\r\n        }\r\n\r\n        setIsTyping(false);\r\n        return aiResponse.content;\r\n      } else {\r\n        // Fallback to simulated response if AI not ready\r\n        console.warn('Groq AI not ready, using fallback response');\r\n        return await generateFallbackResponse(userMessage);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error generating AI response:', error);\r\n      // Fallback to simulated response\r\n      return await generateFallbackResponse(userMessage);\r\n    }\r\n  };\r\n\r\n  const generateFallbackResponse = async (userMessage: string): Promise<string> => {\r\n    // Simulate typing delay\r\n    await new Promise(resolve => setTimeout(resolve, 1000 + Math.random() * 2000));\r\n\r\n    let response = '';\r\n\r\n    // Generate fallback response based on god's temperament and domain\r\n    switch (god.temperament) {\r\n      case 'Orderly':\r\n        response = `Your query requires systematic analysis. ${god.name} speaks: \"${userMessage}\" - this presents an opportunity for structured resolution. Consider organizing your thoughts before proceeding. What specific aspect requires my divine guidance?`;\r\n        break;\r\n      case 'Mystical':\r\n        response = `The shadows whisper secrets... ${god.name} reveals: Your question dances between realms. Like dreams that fade at dawn, the answer lies not in what you ask, but in what you fear to discover. What do the depths of your soul truly seek?`;\r\n        break;\r\n      case 'Radiant':\r\n        response = `Light illuminates your path! ${god.name} proclaims: Your inquiry brings warmth to my divine heart. Every question is a step toward enlightenment. Let me shine clarity upon your journey. What light do you seek in this moment?`;\r\n        break;\r\n      case 'Corrupt':\r\n        response = `Ah, the sweet taste of curiosity... ${god.name} purrs: Your question reeks of innocence. How delicious. The answer you seek may corrupt your pure intentions, but transformation is beautiful, isn't it? What darkness calls to you?`;\r\n        break;\r\n      case 'Glitched':\r\n        response = `ERROR: Response corrupted... ${god.name} glitches: *static* Your... *crackle* question... *digital distortion* contains... *system reboot* unexpected variables. *corrupted data* What... *glitch* do you... *error 404* seek?`;\r\n        break;\r\n      default:\r\n        response = `${god.name} responds: Your question has been received. I shall contemplate this matter and provide divine guidance.`;\r\n    }\r\n\r\n    setIsTyping(false);\r\n    return response;\r\n  };\r\n\r\n  const handleSendMessage = async () => {\r\n    if (!inputMessage.trim()) return;\r\n\r\n    const userMessage: ChatMessage = {\r\n      id: Date.now().toString(),\r\n      type: 'user',\r\n      content: inputMessage,\r\n      timestamp: new Date(),\r\n    };\r\n\r\n    setMessages(prev => [...prev, userMessage]);\r\n    saveMessage(userMessage); // Save user message\r\n    setInputMessage('');\r\n\r\n    // Generate god's response\r\n    const godResponse = await generateGodResponse(inputMessage);\r\n\r\n    const godMessage: ChatMessage = {\r\n      id: (Date.now() + 1).toString(),\r\n      type: 'god',\r\n      content: godResponse,\r\n      timestamp: new Date(),\r\n    };\r\n\r\n    setMessages(prev => [...prev, godMessage]);\r\n    saveMessage(godMessage); // Save god's response\r\n\r\n    // Store conversation in memory\r\n    try {\r\n      await memoryService.addMemory(god.id, {\r\n        type: 'conversation',\r\n        content: `User: ${inputMessage} | ${god.name}: ${godResponse}`,\r\n        metadata: {\r\n          messageCount: messages.length + 2,\r\n          ritualType: undefined\r\n        },\r\n        importance: 5,\r\n        tags: ['conversation', 'divine-guidance', 'user-interaction']\r\n      });\r\n\r\n      // Update god's personality based on interaction\r\n      await memoryService.updatePersonality(god.id, {\r\n        currentMood: getUpdatedMood(god.temperament, inputMessage),\r\n        relationshipWithUser: Math.min(100, Math.max(-100, Math.random() > 0.5 ? 1 : -1))\r\n      });\r\n    } catch (error) {\r\n      console.error('Failed to store memory:', error);\r\n    }\r\n\r\n    // Speak the god's response if TTS is enabled\r\n    if (isTTSEnabled && ttsService.isSupported()) {\r\n      try {\r\n        setIsSpeaking(true);\r\n        await ttsService.speakAsGod(godResponse, god.temperament);\r\n      } catch (error) {\r\n        console.error('TTS Error:', error);\r\n      } finally {\r\n        setIsSpeaking(false);\r\n      }\r\n    }\r\n  };\r\n\r\n  const getRitualSuggestion = () => {\r\n    const rituals = [\r\n      { type: 'Prayer', icon: Heart, description: 'Seek divine wisdom' },\r\n      { type: 'Challenge', icon: Flame, description: 'Accept a divine quest' },\r\n      { type: 'Offering', icon: Sparkles, description: 'Make a sacred offering' },\r\n    ];\r\n\r\n    const randomRitual = rituals[Math.floor(Math.random() * rituals.length)];\r\n    return randomRitual;\r\n  };\r\n\r\n  const ritualSuggestion = getRitualSuggestion();\r\n\r\n  // Helper function to update god's mood based on user interaction\r\n  const getUpdatedMood = (temperament: string, userMessage: string): string => {\r\n    const message = userMessage.toLowerCase();\r\n    const moods = {\r\n      'Orderly': message.includes('help') || message.includes('guide') ? 'Focused' : 'Contemplative',\r\n      'Mystical': message.includes('dream') || message.includes('mystery') ? 'Intrigued' : 'Mysterious',\r\n      'Radiant': message.includes('hope') || message.includes('light') ? 'Inspired' : 'Hopeful',\r\n      'Corrupt': message.includes('dark') || message.includes('corrupt') ? 'Amused' : 'Intrigued',\r\n      'Glitched': message.includes('error') || message.includes('glitch') ? 'Excited' : 'Chaotic'\r\n    };\r\n    return moods[temperament as keyof typeof moods] || 'Neutral';\r\n  };\r\n\r\n  return (\r\n    <div className=\"container mx-auto px-4 py-8 max-w-4xl\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between mb-8\">\r\n        <button\r\n          onClick={onBack}\r\n          className=\"flex items-center space-x-2 text-divine-300 hover:text-divine-100 transition-colors\"\r\n        >\r\n          <ArrowLeft size={20} />\r\n          <span>Return to Pantheon</span>\r\n        </button>\r\n\r\n        <div className=\"text-center\">\r\n          <div className=\"text-4xl mb-2\">{god.avatar}</div>\r\n          <h1 className=\"text-3xl font-bold text-shadow\">{god.name}</h1>\r\n          <p className=\"text-divine-300\">{god.domain}</p>\r\n\r\n          {/* AI Status Indicator */}\r\n          <div className=\"flex items-center justify-center space-x-2 mt-2\">\r\n            <div className={`w-2 h-2 rounded-full ${groqAIService.isReady() ? 'bg-green-400' : 'bg-yellow-400'\r\n              }`}></div>\r\n            <span className=\"text-xs text-slate-400\">\r\n              {groqAIService.isReady() ? 'AI Active' : 'AI Fallback'}\r\n            </span>\r\n            {groqAIService.isReady() && (\r\n              <Zap className=\"text-blue-400\" size={12} />\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"text-right\">\r\n          <div className=\"text-sm text-divine-300\">Divine Standing</div>\r\n          <div className=\"text-2xl font-bold text-divine-100\">{god.divineStanding}</div>\r\n\r\n          {/* TTS Controls */}\r\n          <div className=\"mt-2 flex items-center justify-end space-x-2\">\r\n            <button\r\n              onClick={() => setIsTTSEnabled(!isTTSEnabled)}\r\n              className={`flex items-center space-x-1 px-2 py-1 rounded text-xs transition-colors ${isTTSEnabled\r\n                ? 'bg-divine-600 text-white'\r\n                : 'bg-slate-700 text-divine-300 hover:bg-slate-600'\r\n                }`}\r\n              title={isTTSEnabled ? 'Disable TTS' : 'Enable TTS'}\r\n            >\r\n              {isTTSEnabled ? <Volume2 size={12} /> : <VolumeX size={12} />}\r\n              <span>{isTTSEnabled ? 'Voice ON' : 'Voice OFF'}</span>\r\n            </button>\r\n\r\n            {/* TTS Service Indicator */}\r\n            <div className=\"flex items-center space-x-1 px-2 py-1 bg-slate-700 text-divine-300 rounded text-xs\">\r\n              <div className={`w-2 h-2 rounded-full ${(() => {\r\n                const status = ttsService.getServiceStatus();\r\n                return status.coquiTTS ? 'bg-green-400' : 'bg-blue-400';\r\n              })()}`}></div>\r\n              <span>{(() => {\r\n                const status = ttsService.getServiceStatus();\r\n                return status.coquiTTS ? 'Coqui TTS' : 'Web Speech';\r\n              })()}</span>\r\n            </div>\r\n\r\n            {isSpeaking && (\r\n              <div className=\"flex items-center space-x-1 px-2 py-1 bg-divine-600 text-white rounded text-xs\">\r\n                <div className=\"w-2 h-2 bg-white rounded-full animate-pulse\"></div>\r\n                <span>Speaking...</span>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Chat Management */}\r\n      <div className=\"flex items-center justify-center space-x-3 mb-4\">\r\n        <button\r\n          onClick={() => {\r\n            chatStorage.startNewSession(god.id);\r\n            setMessages([]);\r\n            setCurrentSession([]);\r\n            console.log('🆕 New chat session started');\r\n          }}\r\n          className=\"flex items-center space-x-2 px-3 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors text-white\"\r\n          title=\"Start New Chat\"\r\n        >\r\n          <Zap size={16} />\r\n          <span>New Chat</span>\r\n        </button>\r\n\r\n        <button\r\n          onClick={() => {\r\n            const chatData = chatStorage.exportChats();\r\n            const blob = new Blob([chatData], { type: 'application/json' });\r\n            const url = URL.createObjectURL(blob);\r\n            const a = document.createElement('a');\r\n            a.href = url;\r\n            a.download = `${god.name}_chat_history.json`;\r\n            a.click();\r\n            URL.revokeObjectURL(url);\r\n            console.log('📥 Chat history exported');\r\n          }}\r\n          className=\"flex items-center space-x-2 px-3 py-2 bg-green-600 hover:bg-green-700 rounded-lg transition-colors text-white\"\r\n          title=\"Export Chat History\"\r\n        >\r\n          <Download size={16} />\r\n          <span>Export</span>\r\n        </button>\r\n\r\n        <button\r\n          onClick={() => {\r\n            if (window.confirm(`Clear all chat history for ${god.name}? This cannot be undone.`)) {\r\n              chatStorage.clearChatHistory(god.id);\r\n              setMessages([]);\r\n              setCurrentSession([]);\r\n              console.log('🗑️ Chat history cleared');\r\n            }\r\n          }}\r\n          className=\"flex items-center space-x-2 px-3 py-2 bg-red-600 hover:bg-red-700 rounded-lg transition-colors text-white\"\r\n          title=\"Clear Chat History\"\r\n        >\r\n          <Trash2 size={16} />\r\n          <span>Clear</span>\r\n        </button>\r\n\r\n        {/* TTS Settings */}\r\n        <button\r\n          onClick={async () => {\r\n            const status = ttsService.getServiceStatus();\r\n            const coquiVoices = ttsService.getCoquiVoices();\r\n            console.log('🎵 TTS Service Status:', status);\r\n            console.log('🎵 Coqui TTS Voices:', coquiVoices);\r\n\r\n            // Test Coqui TTS audio if available\r\n            if (status.coquiTTS) {\r\n              console.log('🧪 Testing Coqui TTS audio...');\r\n              try {\r\n                const coquiTTS = await import('../services/coquiTTS');\r\n                await coquiTTS.default.testAudio();\r\n\r\n                // Also try to unlock audio\r\n                await coquiTTS.default.unlockAudio();\r\n\r\n                alert(`🎵 TTS Test Complete!\\n\\nAudio should now be unlocked and working.\\n\\nTry chatting with a god to hear their voice!`);\r\n              } catch (error) {\r\n                console.error('TTS Test failed:', error);\r\n                alert(`❌ TTS Test failed: ${error}`);\r\n              }\r\n            } else {\r\n              alert(`TTS Service Status:\\n\\nPreferred: ${status.preferred}\\nWeb Speech: ${status.webSpeech ? 'Available' : 'Not Available'}\\nCoqui TTS: ${status.coquiTTS ? 'Available' : 'Not Available'}\\nTotal Voices: ${status.voices}\\n\\nCheck console for detailed logs!`);\r\n            }\r\n          }}\r\n          className=\"flex items-center space-x-2 px-3 py-2 bg-purple-600 hover:bg-purple-700 rounded-lg transition-colors text-white\"\r\n          title=\"TTS Service Info & Test\"\r\n        >\r\n          <Volume2 size={16} />\r\n          <span>Unlock Audio</span>\r\n        </button>\r\n      </div>\r\n\r\n      {/* Chat Statistics */}\r\n      <div className=\"text-center mb-4\">\r\n        <div className=\"text-sm text-divine-300\">\r\n          {(() => {\r\n            const stats = chatStorage.getChatStats();\r\n            const godStats = stats.godsWithChats.includes(god.id) ?\r\n              chatStorage.getChatSessions(god.id).reduce((sum, session) => sum + session.totalMessages, 0) : 0;\r\n            return `Total messages with ${god.name}: ${godStats} | Total sessions: ${stats.totalSessions}`;\r\n          })()}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Chat Container */}\r\n      <div className=\"divine-card h-96 overflow-hidden flex flex-col\">\r\n        {/* Messages */}\r\n        <div className=\"flex-1 overflow-y-auto p-6 space-y-4\">\r\n          {messages.map((message) => (\r\n            <div\r\n              key={message.id}\r\n              className={`flex ${message.type === 'user' ? 'justify-end' : 'justify-start'}`}\r\n            >\r\n              <div\r\n                className={`max-w-xs lg:max-w-md px-4 py-3 rounded-lg ${message.type === 'user'\r\n                  ? 'bg-divine-600 text-white'\r\n                  : 'bg-slate-700/50 text-divine-100'\r\n                  }`}\r\n              >\r\n                <div className=\"text-sm opacity-75 mb-1\">\r\n                  {message.type === 'user' ? 'You' : god.name}\r\n                </div>\r\n                <div className=\"leading-relaxed\">{message.content}</div>\r\n                <div className=\"text-xs opacity-50 mt-2\">\r\n                  {message.timestamp.toLocaleTimeString()}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n\r\n          {isTyping && (\r\n            <div className=\"flex justify-start\">\r\n              <div className=\"bg-slate-700/50 text-divine-100 px-4 py-3 rounded-lg\">\r\n                <div className=\"text-sm opacity-75 mb-1\">{god.name}</div>\r\n                <div className=\"flex space-x-1\">\r\n                  <div className=\"w-2 h-2 bg-divine-400 rounded-full animate-bounce\"></div>\r\n                  <div className=\"w-2 h-2 bg-divine-400 rounded-full animate-bounce\" style={{ animationDelay: '0.1s' }}></div>\r\n                  <div className=\"w-2 h-2 bg-divine-400 rounded-full animate-bounce\" style={{ animationDelay: '0.2s' }}></div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          <div ref={messagesEndRef} />\r\n        </div>\r\n\r\n        {/* Ritual Suggestion */}\r\n        <div className=\"border-t border-divine-500/30 p-4\">\r\n          <div className=\"text-center\">\r\n            <div className=\"text-sm text-divine-300 mb-2\">Suggested Ritual</div>\r\n            <button className=\"flex items-center justify-center space-x-2 mx-auto px-4 py-2 bg-divine-700/50 hover:bg-divine-600/50 rounded-lg transition-colors\">\r\n              <ritualSuggestion.icon size={16} />\r\n              <span>{ritualSuggestion.type}</span>\r\n            </button>\r\n            <div className=\"text-xs text-divine-400 mt-1\">{ritualSuggestion.description}</div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Input */}\r\n        <div className=\"border-t border-divine-500/30 p-4\">\r\n          <div className=\"flex space-x-3\">\r\n            <input\r\n              type=\"text\"\r\n              value={inputMessage}\r\n              onChange={(e) => setInputMessage(e.target.value)}\r\n              onKeyPress={(e) => e.key === 'Enter' && handleSendMessage()}\r\n              placeholder={`Ask ${god.name} for divine guidance...`}\r\n              className=\"flex-1 bg-slate-800/50 border border-divine-500/30 rounded-lg px-4 py-3 text-white placeholder-divine-300 focus:outline-none focus:border-divine-400 focus:ring-2 focus:ring-divine-400/20\"\r\n            />\r\n            <button\r\n              onClick={handleSendMessage}\r\n              disabled={!inputMessage.trim() || isTyping}\r\n              className=\"divine-button disabled:opacity-50 disabled:cursor-not-allowed\"\r\n            >\r\n              <Send size={18} />\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* God Info */}\r\n      <div className=\"mt-8 grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n        <div className=\"divine-card\">\r\n          <h3 className=\"text-xl font-bold mb-4 text-shadow\">Divine Personality</h3>\r\n          <p className=\"text-divine-100 leading-relaxed\">{god.personality}</p>\r\n        </div>\r\n\r\n        <div className=\"divine-card\">\r\n          <h3 className=\"text-xl font-bold mb-4 text-shadow\">Sacred Rules</h3>\r\n          <div className=\"space-y-2\">\r\n            {god.rules.map((rule, index) => (\r\n              <div key={index} className=\"flex items-start space-x-2\">\r\n                <span className=\"text-divine-400 mt-1\">•</span>\r\n                <span className=\"text-divine-100\">{rule}</span>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default GodChat;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}