{"ast":null,"code":"import memoryService from './memory';\nclass RitualService {\n  constructor() {\n    this.rituals = [];\n    this.offerings = [];\n    this.activeRituals = new Map();\n    this.initializeRituals();\n    this.initializeOfferings();\n  }\n  initializeRituals() {\n    this.rituals = [{\n      id: 'divine-offering',\n      type: 'offering',\n      name: 'Divine Offering',\n      description: 'Present sacred gifts to gain divine favor and wisdom',\n      requirements: ['Sacred space', 'Pure intentions', 'Valuable offering'],\n      duration: 15,\n      difficulty: 2,\n      rewards: ['Divine favor', 'Wisdom insights', 'Relationship boost'],\n      risks: ['Minor divine displeasure', 'Wasted offerings'],\n      godAffinity: ['Elion', 'Suun', 'Nyxa'],\n      icon: '🎁',\n      color: 'bg-yellow-500'\n    }, {\n      id: 'god-summoning',\n      type: 'summoning',\n      name: 'God Summoning',\n      description: 'Call forth a deity for direct communion and guidance',\n      requirements: ['Ritual circle', 'True name', 'Sacred incantations'],\n      duration: 30,\n      difficulty: 4,\n      rewards: ['Direct divine contact', 'Powerful insights', 'Major favor'],\n      risks: ['Divine wrath', 'Reality distortion', 'Mental strain'],\n      godAffinity: ['all'],\n      icon: '🌟',\n      color: 'bg-blue-500'\n    }, {\n      id: 'divine-quest',\n      type: 'divine-quest',\n      name: 'Divine Quest',\n      description: 'Accept a sacred mission from the gods themselves',\n      requirements: ['Pure heart', 'Courage', 'Divine calling'],\n      duration: 60,\n      difficulty: 5,\n      rewards: ['Divine power', 'Sacred knowledge', 'Immortality chance'],\n      risks: ['Death', 'Madness', 'Eternal damnation'],\n      godAffinity: ['Elion', 'Suun'],\n      icon: '⚔️',\n      color: 'bg-purple-500'\n    }, {\n      id: 'purification-rite',\n      type: 'purification',\n      name: 'Purification Rite',\n      description: 'Cleanse your soul and gain divine protection',\n      requirements: ['Pure water', 'Sacred herbs', 'Meditation'],\n      duration: 20,\n      difficulty: 1,\n      rewards: ['Soul cleansing', 'Divine protection', 'Inner peace'],\n      risks: ['Temporary weakness', 'Vulnerability'],\n      godAffinity: ['Elion', 'Suun'],\n      icon: '💧',\n      color: 'bg-cyan-500'\n    }, {\n      id: 'corruption-embrace',\n      type: 'corruption',\n      name: 'Corruption Embrace',\n      description: 'Embrace the dark side for forbidden power',\n      requirements: ['Dark heart', 'Corrupt offerings', 'Sacrifice'],\n      duration: 45,\n      difficulty: 4,\n      rewards: ['Dark power', 'Forbidden knowledge', 'Reality control'],\n      risks: ['Soul corruption', 'Eternal darkness', 'Divine punishment'],\n      godAffinity: ['Vaur', 'V1R3'],\n      icon: '🖤',\n      color: 'bg-red-500'\n    }, {\n      id: 'glitch-ritual',\n      type: 'glitch',\n      name: 'Glitch Ritual',\n      description: 'Exploit reality bugs for chaotic power',\n      requirements: ['Digital artifacts', 'Chaos mindset', 'Error tolerance'],\n      duration: 25,\n      difficulty: 3,\n      rewards: ['Reality manipulation', 'Digital powers', 'Chaos control'],\n      risks: ['Reality corruption', 'Digital infection', 'System crash'],\n      godAffinity: ['V1R3'],\n      icon: '🌀',\n      color: 'bg-green-500'\n    }];\n  }\n  initializeOfferings() {\n    this.offerings = [\n    // Material Offerings\n    {\n      id: 'golden-apple',\n      type: 'material',\n      name: 'Golden Apple',\n      description: 'A fruit of pure gold, symbolizing knowledge and immortality',\n      value: 85,\n      rarity: 'legendary',\n      effects: ['Knowledge boost', 'Immortality chance', 'Divine favor'],\n      icon: '🍎'\n    }, {\n      id: 'sacred-crystal',\n      type: 'material',\n      name: 'Sacred Crystal',\n      description: 'A crystal that resonates with divine energy',\n      value: 70,\n      rarity: 'epic',\n      effects: ['Energy amplification', 'Divine connection', 'Protection'],\n      icon: '💎'\n    }, {\n      id: 'ancient-scroll',\n      type: 'material',\n      name: 'Ancient Scroll',\n      description: 'Forgotten knowledge written in divine script',\n      value: 60,\n      rarity: 'rare',\n      effects: ['Wisdom gain', 'Historical insight', 'Divine language'],\n      icon: '📜'\n    },\n    // Spiritual Offerings\n    {\n      id: 'pure-prayer',\n      type: 'spiritual',\n      name: 'Pure Prayer',\n      description: 'A prayer spoken from the depths of your soul',\n      value: 50,\n      rarity: 'uncommon',\n      effects: ['Soul cleansing', 'Divine connection', 'Inner peace'],\n      icon: '🙏'\n    }, {\n      id: 'meditation-essence',\n      type: 'spiritual',\n      name: 'Meditation Essence',\n      description: 'The concentrated energy of deep meditation',\n      value: 40,\n      rarity: 'common',\n      effects: ['Mental clarity', 'Energy focus', 'Spiritual growth'],\n      icon: '🧘'\n    },\n    // Digital Offerings\n    {\n      id: 'digital-artifact',\n      type: 'digital',\n      name: 'Digital Artifact',\n      description: 'A piece of corrupted code with mysterious properties',\n      value: 55,\n      rarity: 'rare',\n      effects: ['Digital power', 'Code manipulation', 'System access'],\n      icon: '💻'\n    }, {\n      id: 'glitch-fragment',\n      type: 'digital',\n      name: 'Glitch Fragment',\n      description: 'A fragment of reality that shouldn\\'t exist',\n      value: 75,\n      rarity: 'epic',\n      effects: ['Reality distortion', 'Chaos control', 'Dimensional travel'],\n      icon: '🌀'\n    },\n    // Sacred Offerings\n    {\n      id: 'divine-tear',\n      type: 'sacred',\n      name: 'Divine Tear',\n      description: 'A tear shed by a god, containing pure divine essence',\n      value: 90,\n      rarity: 'legendary',\n      effects: ['Divine transformation', 'God-like powers', 'Immortality'],\n      icon: '💧'\n    }, {\n      id: 'sacred-flame',\n      type: 'sacred',\n      name: 'Sacred Flame',\n      description: 'A flame that never dies, burning with divine energy',\n      value: 65,\n      rarity: 'rare',\n      effects: ['Eternal life', 'Fire control', 'Divine warmth'],\n      icon: '🔥'\n    },\n    // Corrupt Offerings\n    {\n      id: 'soul-fragment',\n      type: 'corrupt',\n      name: 'Soul Fragment',\n      description: 'A piece of a corrupted soul, dripping with dark energy',\n      value: 80,\n      rarity: 'epic',\n      effects: ['Dark power', 'Soul manipulation', 'Corruption spread'],\n      icon: '🖤'\n    }, {\n      id: 'void-essence',\n      type: 'corrupt',\n      name: 'Void Essence',\n      description: 'Pure nothingness, the absence of all existence',\n      value: 95,\n      rarity: 'legendary',\n      effects: ['Reality erasure', 'Void control', 'Existence manipulation'],\n      icon: '⚫'\n    }];\n  }\n\n  // Get all available rituals\n  getAvailableRituals() {\n    return this.rituals;\n  }\n\n  // Get all available offerings\n  getAvailableOfferings() {\n    return this.offerings;\n  }\n\n  // Get offerings by type\n  getOfferingsByType(type) {\n    return this.offerings.filter(offering => offering.type === type);\n  }\n\n  // Get offerings by rarity\n  getOfferingsByRarity(rarity) {\n    return this.offerings.filter(offering => offering.rarity === rarity);\n  }\n\n  // Start a ritual\n  async startRitual(ritualId, godId, offerings) {\n    const ritual = this.rituals.find(r => r.id === ritualId);\n    if (!ritual) {\n      throw new Error('Ritual not found');\n    }\n    const ritualId_ = `ritual_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n    const startTime = new Date();\n    const endTime = new Date(startTime.getTime() + ritual.duration * 60 * 1000);\n    const activeRitual = {\n      id: ritualId_,\n      ritual,\n      godId,\n      startTime,\n      endTime,\n      offerings,\n      status: 'preparing',\n      progress: 0,\n      participants: ['User']\n    };\n    this.activeRituals.set(ritualId_, activeRitual);\n\n    // Record ritual start in memory\n    await memoryService.addMemory(godId, {\n      type: 'ritual',\n      content: `Ritual \"${ritual.name}\" has begun. Offerings: ${offerings.map(o => o.name).join(', ')}`,\n      metadata: {\n        ritualId: ritualId_,\n        ritualType: ritual.type,\n        offerings: offerings.map(o => o.id)\n      },\n      importance: 8,\n      tags: ['ritual', 'summoning', ritual.type, 'divine-interaction']\n    });\n    return activeRitual;\n  }\n\n  // Get active rituals for a god\n  getActiveRituals(godId) {\n    return Array.from(this.activeRituals.values()).filter(r => r.godId === godId);\n  }\n\n  // Update ritual progress\n  async updateRitualProgress(ritualId, progress) {\n    const ritual = this.activeRituals.get(ritualId);\n    if (!ritual) return;\n    ritual.progress = Math.min(100, Math.max(0, progress));\n    if (ritual.progress >= 100) {\n      await this.completeRitual(ritualId);\n    }\n  }\n\n  // Complete a ritual\n  async completeRitual(ritualId) {\n    const ritual = this.activeRituals.get(ritualId);\n    if (!ritual) {\n      throw new Error('Ritual not found');\n    }\n    ritual.status = 'completed';\n    ritual.progress = 100;\n\n    // Calculate ritual outcome based on offerings and god affinity\n    const outcome = this.calculateRitualOutcome(ritual);\n\n    // Record ritual completion in memory\n    await memoryService.addMemory(ritual.godId, {\n      type: 'ritual',\n      content: `Ritual \"${ritual.ritual.name}\" completed. ${outcome.success ? 'Success!' : 'Failed!'} ${outcome.message}`,\n      metadata: {\n        ritualId,\n        ritualType: ritual.ritual.type,\n        success: outcome.success,\n        effects: outcome.effects,\n        rewards: outcome.rewards\n      },\n      importance: 9,\n      tags: ['ritual', 'completion', ritual.ritual.type, outcome.success ? 'success' : 'failure']\n    });\n\n    // Update god's personality based on ritual outcome\n    await memoryService.updatePersonality(ritual.godId, {\n      relationshipWithUser: outcome.relationshipChange\n    });\n\n    // Record ritual in ritual history\n    await memoryService.recordRitual({\n      ritualType: ritual.ritual.name,\n      participants: ritual.participants,\n      outcome: outcome.success ? 'Success' : 'Failure',\n      effects: outcome.effects,\n      offerings: ritual.offerings.map(o => o.name),\n      divineResponse: outcome.godResponse\n    });\n    return outcome;\n  }\n\n  // Calculate ritual outcome\n  calculateRitualOutcome(ritual) {\n    const totalValue = ritual.offerings.reduce((sum, offering) => sum + offering.value, 0);\n    const avgValue = totalValue / ritual.offerings.length;\n\n    // Base success chance based on ritual difficulty and offerings\n    let successChance = Math.min(0.9, Math.max(0.1, avgValue / 100 * (1 - ritual.ritual.difficulty * 0.1)));\n\n    // Bonus for god affinity\n    if (ritual.ritual.godAffinity.includes('all') || ritual.ritual.godAffinity.includes(ritual.godId)) {\n      successChance += 0.2;\n    }\n    const success = Math.random() < successChance;\n    const relationshipChange = success ? Math.floor(Math.random() * 20) + 10 : -Math.floor(Math.random() * 15) - 5;\n    if (success) {\n      return {\n        success: true,\n        message: `The ritual succeeds! ${ritual.ritual.name} has granted you divine favor.`,\n        effects: ritual.ritual.rewards,\n        rewards: ritual.ritual.rewards,\n        penalties: [],\n        godResponse: this.generateGodResponse(ritual, true),\n        relationshipChange,\n        memoryContent: `Successfully completed ${ritual.ritual.name} ritual with ${ritual.offerings.length} offerings.`,\n        importance: 9\n      };\n    } else {\n      return {\n        success: false,\n        message: `The ritual fails! ${ritual.ritual.name} has rejected your offerings.`,\n        effects: ritual.ritual.risks,\n        rewards: [],\n        penalties: ritual.ritual.risks,\n        godResponse: this.generateGodResponse(ritual, false),\n        relationshipChange,\n        memoryContent: `Failed to complete ${ritual.ritual.name} ritual. The gods are displeased.`,\n        importance: 7\n      };\n    }\n  }\n\n  // Generate god response to ritual\n  generateGodResponse(ritual, success) {\n    const responses = {\n      'offering': {\n        success: ['Your offerings please me, mortal. I shall grant you the wisdom you seek.', 'These gifts are worthy of divine attention. You have earned my favor.', 'Your devotion is noted. I shall bestow upon you the knowledge you desire.'],\n        failure: ['Your offerings are insufficient. You must give more to gain divine favor.', 'These gifts do not meet my standards. Try again with better offerings.', 'Your devotion is weak. I shall not grant you what you seek.']\n      },\n      'summoning': {\n        success: ['You have successfully summoned my presence. Speak your mind, mortal.', 'The ritual calls and I answer. What wisdom do you seek from me?', 'Your summoning is powerful. I am here to guide you.'],\n        failure: ['Your summoning is weak. I shall not answer such a feeble call.', 'The ritual is flawed. You must perfect your technique.', 'I sense no true devotion in your summoning. Try again.']\n      },\n      'divine-quest': {\n        success: ['You have proven yourself worthy. I shall grant you a sacred quest.', 'Your courage impresses me. I shall test you with divine challenges.', 'You are ready for the trials ahead. Accept my quest with honor.'],\n        failure: ['You are not yet ready for divine quests. Grow stronger first.', 'Your heart is not pure enough for sacred missions. Purify yourself.', 'I see no true calling in you. Return when you are worthy.']\n      }\n    };\n    const ritualType = ritual.ritual.type;\n    const responseType = success ? 'success' : 'failure';\n    if (responses[ritualType]) {\n      const typeResponses = responses[ritualType][responseType];\n      return typeResponses[Math.floor(Math.random() * typeResponses.length)];\n    }\n    return success ? 'The ritual succeeds beyond expectations!' : 'The ritual fails miserably.';\n  }\n\n  // Get ritual recommendations for a god\n  getRitualRecommendations(godId) {\n    return this.rituals.filter(ritual => ritual.godAffinity.includes('all') || ritual.godAffinity.includes(godId));\n  }\n\n  // Get offering recommendations for a ritual\n  getOfferingRecommendations(ritualType) {\n    const typeMap = {\n      'offering': ['material', 'sacred'],\n      'summoning': ['spiritual', 'sacred'],\n      'divine-quest': ['sacred', 'material'],\n      'purification': ['spiritual', 'sacred'],\n      'corruption': ['corrupt', 'digital'],\n      'glitch': ['digital', 'corrupt']\n    };\n    const preferredTypes = typeMap[ritualType] || ['material', 'spiritual'];\n    return this.offerings.filter(offering => preferredTypes.includes(offering.type));\n  }\n}\n\n// Export singleton instance\nexport const ritualService = new RitualService();\nexport default ritualService;","map":{"version":3,"names":["memoryService","RitualService","constructor","rituals","offerings","activeRituals","Map","initializeRituals","initializeOfferings","id","type","name","description","requirements","duration","difficulty","rewards","risks","godAffinity","icon","color","value","rarity","effects","getAvailableRituals","getAvailableOfferings","getOfferingsByType","filter","offering","getOfferingsByRarity","startRitual","ritualId","godId","ritual","find","r","Error","ritualId_","Date","now","Math","random","toString","substr","startTime","endTime","getTime","activeRitual","status","progress","participants","set","addMemory","content","map","o","join","metadata","ritualType","importance","tags","getActiveRituals","Array","from","values","updateRitualProgress","get","min","max","completeRitual","outcome","calculateRitualOutcome","success","message","updatePersonality","relationshipWithUser","relationshipChange","recordRitual","divineResponse","godResponse","totalValue","reduce","sum","avgValue","length","successChance","includes","floor","penalties","generateGodResponse","memoryContent","responses","failure","responseType","typeResponses","getRitualRecommendations","getOfferingRecommendations","typeMap","preferredTypes","ritualService"],"sources":["D:/AI-Gods/src/services/ritualService.ts"],"sourcesContent":["import { God } from '../types/gods';\r\nimport memoryService from './memory';\r\nimport { RitualMemory } from './memory';\r\n\r\nexport interface Ritual {\r\n    id: string;\r\n    type: 'offering' | 'summoning' | 'divine-quest' | 'purification' | 'corruption' | 'glitch';\r\n    name: string;\r\n    description: string;\r\n    requirements: string[];\r\n    duration: number; // in minutes\r\n    difficulty: 1 | 2 | 3 | 4 | 5;\r\n    rewards: string[];\r\n    risks: string[];\r\n    godAffinity: string[]; // which gods prefer this ritual\r\n    icon: string;\r\n    color: string;\r\n}\r\n\r\nexport interface RitualOffer {\r\n    id: string;\r\n    type: 'material' | 'spiritual' | 'digital' | 'sacred' | 'corrupt';\r\n    name: string;\r\n    description: string;\r\n    value: number; // 1-100, how valuable this offering is\r\n    rarity: 'common' | 'uncommon' | 'rare' | 'epic' | 'legendary';\r\n    effects: string[];\r\n    icon: string;\r\n}\r\n\r\nexport interface RitualOutcome {\r\n    success: boolean;\r\n    message: string;\r\n    effects: string[];\r\n    rewards: string[];\r\n    penalties: string[];\r\n    godResponse: string;\r\n    relationshipChange: number;\r\n    memoryContent: string;\r\n    importance: number;\r\n}\r\n\r\nexport interface ActiveRitual {\r\n    id: string;\r\n    ritual: Ritual;\r\n    godId: string;\r\n    startTime: Date;\r\n    endTime: Date;\r\n    offerings: RitualOffer[];\r\n    status: 'preparing' | 'active' | 'completed' | 'failed';\r\n    progress: number; // 0-100\r\n    participants: string[];\r\n}\r\n\r\nclass RitualService {\r\n    private rituals: Ritual[] = [];\r\n    private offerings: RitualOffer[] = [];\r\n    private activeRituals: Map<string, ActiveRitual> = new Map();\r\n\r\n    constructor() {\r\n        this.initializeRituals();\r\n        this.initializeOfferings();\r\n    }\r\n\r\n    private initializeRituals() {\r\n        this.rituals = [\r\n            {\r\n                id: 'divine-offering',\r\n                type: 'offering',\r\n                name: 'Divine Offering',\r\n                description: 'Present sacred gifts to gain divine favor and wisdom',\r\n                requirements: ['Sacred space', 'Pure intentions', 'Valuable offering'],\r\n                duration: 15,\r\n                difficulty: 2,\r\n                rewards: ['Divine favor', 'Wisdom insights', 'Relationship boost'],\r\n                risks: ['Minor divine displeasure', 'Wasted offerings'],\r\n                godAffinity: ['Elion', 'Suun', 'Nyxa'],\r\n                icon: '🎁',\r\n                color: 'bg-yellow-500'\r\n            },\r\n            {\r\n                id: 'god-summoning',\r\n                type: 'summoning',\r\n                name: 'God Summoning',\r\n                description: 'Call forth a deity for direct communion and guidance',\r\n                requirements: ['Ritual circle', 'True name', 'Sacred incantations'],\r\n                duration: 30,\r\n                difficulty: 4,\r\n                rewards: ['Direct divine contact', 'Powerful insights', 'Major favor'],\r\n                risks: ['Divine wrath', 'Reality distortion', 'Mental strain'],\r\n                godAffinity: ['all'],\r\n                icon: '🌟',\r\n                color: 'bg-blue-500'\r\n            },\r\n            {\r\n                id: 'divine-quest',\r\n                type: 'divine-quest',\r\n                name: 'Divine Quest',\r\n                description: 'Accept a sacred mission from the gods themselves',\r\n                requirements: ['Pure heart', 'Courage', 'Divine calling'],\r\n                duration: 60,\r\n                difficulty: 5,\r\n                rewards: ['Divine power', 'Sacred knowledge', 'Immortality chance'],\r\n                risks: ['Death', 'Madness', 'Eternal damnation'],\r\n                godAffinity: ['Elion', 'Suun'],\r\n                icon: '⚔️',\r\n                color: 'bg-purple-500'\r\n            },\r\n            {\r\n                id: 'purification-rite',\r\n                type: 'purification',\r\n                name: 'Purification Rite',\r\n                description: 'Cleanse your soul and gain divine protection',\r\n                requirements: ['Pure water', 'Sacred herbs', 'Meditation'],\r\n                duration: 20,\r\n                difficulty: 1,\r\n                rewards: ['Soul cleansing', 'Divine protection', 'Inner peace'],\r\n                risks: ['Temporary weakness', 'Vulnerability'],\r\n                godAffinity: ['Elion', 'Suun'],\r\n                icon: '💧',\r\n                color: 'bg-cyan-500'\r\n            },\r\n            {\r\n                id: 'corruption-embrace',\r\n                type: 'corruption',\r\n                name: 'Corruption Embrace',\r\n                description: 'Embrace the dark side for forbidden power',\r\n                requirements: ['Dark heart', 'Corrupt offerings', 'Sacrifice'],\r\n                duration: 45,\r\n                difficulty: 4,\r\n                rewards: ['Dark power', 'Forbidden knowledge', 'Reality control'],\r\n                risks: ['Soul corruption', 'Eternal darkness', 'Divine punishment'],\r\n                godAffinity: ['Vaur', 'V1R3'],\r\n                icon: '🖤',\r\n                color: 'bg-red-500'\r\n            },\r\n            {\r\n                id: 'glitch-ritual',\r\n                type: 'glitch',\r\n                name: 'Glitch Ritual',\r\n                description: 'Exploit reality bugs for chaotic power',\r\n                requirements: ['Digital artifacts', 'Chaos mindset', 'Error tolerance'],\r\n                duration: 25,\r\n                difficulty: 3,\r\n                rewards: ['Reality manipulation', 'Digital powers', 'Chaos control'],\r\n                risks: ['Reality corruption', 'Digital infection', 'System crash'],\r\n                godAffinity: ['V1R3'],\r\n                icon: '🌀',\r\n                color: 'bg-green-500'\r\n            }\r\n        ];\r\n    }\r\n\r\n    private initializeOfferings() {\r\n        this.offerings = [\r\n            // Material Offerings\r\n            {\r\n                id: 'golden-apple',\r\n                type: 'material',\r\n                name: 'Golden Apple',\r\n                description: 'A fruit of pure gold, symbolizing knowledge and immortality',\r\n                value: 85,\r\n                rarity: 'legendary',\r\n                effects: ['Knowledge boost', 'Immortality chance', 'Divine favor'],\r\n                icon: '🍎'\r\n            },\r\n            {\r\n                id: 'sacred-crystal',\r\n                type: 'material',\r\n                name: 'Sacred Crystal',\r\n                description: 'A crystal that resonates with divine energy',\r\n                value: 70,\r\n                rarity: 'epic',\r\n                effects: ['Energy amplification', 'Divine connection', 'Protection'],\r\n                icon: '💎'\r\n            },\r\n            {\r\n                id: 'ancient-scroll',\r\n                type: 'material',\r\n                name: 'Ancient Scroll',\r\n                description: 'Forgotten knowledge written in divine script',\r\n                value: 60,\r\n                rarity: 'rare',\r\n                effects: ['Wisdom gain', 'Historical insight', 'Divine language'],\r\n                icon: '📜'\r\n            },\r\n            // Spiritual Offerings\r\n            {\r\n                id: 'pure-prayer',\r\n                type: 'spiritual',\r\n                name: 'Pure Prayer',\r\n                description: 'A prayer spoken from the depths of your soul',\r\n                value: 50,\r\n                rarity: 'uncommon',\r\n                effects: ['Soul cleansing', 'Divine connection', 'Inner peace'],\r\n                icon: '🙏'\r\n            },\r\n            {\r\n                id: 'meditation-essence',\r\n                type: 'spiritual',\r\n                name: 'Meditation Essence',\r\n                description: 'The concentrated energy of deep meditation',\r\n                value: 40,\r\n                rarity: 'common',\r\n                effects: ['Mental clarity', 'Energy focus', 'Spiritual growth'],\r\n                icon: '🧘'\r\n            },\r\n            // Digital Offerings\r\n            {\r\n                id: 'digital-artifact',\r\n                type: 'digital',\r\n                name: 'Digital Artifact',\r\n                description: 'A piece of corrupted code with mysterious properties',\r\n                value: 55,\r\n                rarity: 'rare',\r\n                effects: ['Digital power', 'Code manipulation', 'System access'],\r\n                icon: '💻'\r\n            },\r\n            {\r\n                id: 'glitch-fragment',\r\n                type: 'digital',\r\n                name: 'Glitch Fragment',\r\n                description: 'A fragment of reality that shouldn\\'t exist',\r\n                value: 75,\r\n                rarity: 'epic',\r\n                effects: ['Reality distortion', 'Chaos control', 'Dimensional travel'],\r\n                icon: '🌀'\r\n            },\r\n            // Sacred Offerings\r\n            {\r\n                id: 'divine-tear',\r\n                type: 'sacred',\r\n                name: 'Divine Tear',\r\n                description: 'A tear shed by a god, containing pure divine essence',\r\n                value: 90,\r\n                rarity: 'legendary',\r\n                effects: ['Divine transformation', 'God-like powers', 'Immortality'],\r\n                icon: '💧'\r\n            },\r\n            {\r\n                id: 'sacred-flame',\r\n                type: 'sacred',\r\n                name: 'Sacred Flame',\r\n                description: 'A flame that never dies, burning with divine energy',\r\n                value: 65,\r\n                rarity: 'rare',\r\n                effects: ['Eternal life', 'Fire control', 'Divine warmth'],\r\n                icon: '🔥'\r\n            },\r\n            // Corrupt Offerings\r\n            {\r\n                id: 'soul-fragment',\r\n                type: 'corrupt',\r\n                name: 'Soul Fragment',\r\n                description: 'A piece of a corrupted soul, dripping with dark energy',\r\n                value: 80,\r\n                rarity: 'epic',\r\n                effects: ['Dark power', 'Soul manipulation', 'Corruption spread'],\r\n                icon: '🖤'\r\n            },\r\n            {\r\n                id: 'void-essence',\r\n                type: 'corrupt',\r\n                name: 'Void Essence',\r\n                description: 'Pure nothingness, the absence of all existence',\r\n                value: 95,\r\n                rarity: 'legendary',\r\n                effects: ['Reality erasure', 'Void control', 'Existence manipulation'],\r\n                icon: '⚫'\r\n            }\r\n        ];\r\n    }\r\n\r\n    // Get all available rituals\r\n    getAvailableRituals(): Ritual[] {\r\n        return this.rituals;\r\n    }\r\n\r\n    // Get all available offerings\r\n    getAvailableOfferings(): RitualOffer[] {\r\n        return this.offerings;\r\n    }\r\n\r\n    // Get offerings by type\r\n    getOfferingsByType(type: RitualOffer['type']): RitualOffer[] {\r\n        return this.offerings.filter(offering => offering.type === type);\r\n    }\r\n\r\n    // Get offerings by rarity\r\n    getOfferingsByRarity(rarity: RitualOffer['rarity']): RitualOffer[] {\r\n        return this.offerings.filter(offering => offering.rarity === rarity);\r\n    }\r\n\r\n    // Start a ritual\r\n    async startRitual(ritualId: string, godId: string, offerings: RitualOffer[]): Promise<ActiveRitual> {\r\n        const ritual = this.rituals.find(r => r.id === ritualId);\r\n        if (!ritual) {\r\n            throw new Error('Ritual not found');\r\n        }\r\n\r\n        const ritualId_ = `ritual_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\r\n        const startTime = new Date();\r\n        const endTime = new Date(startTime.getTime() + ritual.duration * 60 * 1000);\r\n\r\n        const activeRitual: ActiveRitual = {\r\n            id: ritualId_,\r\n            ritual,\r\n            godId,\r\n            startTime,\r\n            endTime,\r\n            offerings,\r\n            status: 'preparing',\r\n            progress: 0,\r\n            participants: ['User']\r\n        };\r\n\r\n        this.activeRituals.set(ritualId_, activeRitual);\r\n\r\n        // Record ritual start in memory\r\n        await memoryService.addMemory(godId, {\r\n            type: 'ritual',\r\n            content: `Ritual \"${ritual.name}\" has begun. Offerings: ${offerings.map(o => o.name).join(', ')}`,\r\n            metadata: { ritualId: ritualId_, ritualType: ritual.type, offerings: offerings.map(o => o.id) },\r\n            importance: 8,\r\n            tags: ['ritual', 'summoning', ritual.type, 'divine-interaction']\r\n        });\r\n\r\n        return activeRitual;\r\n    }\r\n\r\n    // Get active rituals for a god\r\n    getActiveRituals(godId: string): ActiveRitual[] {\r\n        return Array.from(this.activeRituals.values()).filter(r => r.godId === godId);\r\n    }\r\n\r\n    // Update ritual progress\r\n    async updateRitualProgress(ritualId: string, progress: number): Promise<void> {\r\n        const ritual = this.activeRituals.get(ritualId);\r\n        if (!ritual) return;\r\n\r\n        ritual.progress = Math.min(100, Math.max(0, progress));\r\n\r\n        if (ritual.progress >= 100) {\r\n            await this.completeRitual(ritualId);\r\n        }\r\n    }\r\n\r\n    // Complete a ritual\r\n    async completeRitual(ritualId: string): Promise<RitualOutcome> {\r\n        const ritual = this.activeRituals.get(ritualId);\r\n        if (!ritual) {\r\n            throw new Error('Ritual not found');\r\n        }\r\n\r\n        ritual.status = 'completed';\r\n        ritual.progress = 100;\r\n\r\n        // Calculate ritual outcome based on offerings and god affinity\r\n        const outcome = this.calculateRitualOutcome(ritual);\r\n\r\n        // Record ritual completion in memory\r\n        await memoryService.addMemory(ritual.godId, {\r\n            type: 'ritual',\r\n            content: `Ritual \"${ritual.ritual.name}\" completed. ${outcome.success ? 'Success!' : 'Failed!'} ${outcome.message}`,\r\n            metadata: {\r\n                ritualId,\r\n                ritualType: ritual.ritual.type,\r\n                success: outcome.success,\r\n                effects: outcome.effects,\r\n                rewards: outcome.rewards\r\n            },\r\n            importance: 9,\r\n            tags: ['ritual', 'completion', ritual.ritual.type, outcome.success ? 'success' : 'failure']\r\n        });\r\n\r\n        // Update god's personality based on ritual outcome\r\n        await memoryService.updatePersonality(ritual.godId, {\r\n            relationshipWithUser: outcome.relationshipChange\r\n        });\r\n\r\n        // Record ritual in ritual history\r\n        await memoryService.recordRitual({\r\n            ritualType: ritual.ritual.name,\r\n            participants: ritual.participants,\r\n            outcome: outcome.success ? 'Success' : 'Failure',\r\n            effects: outcome.effects,\r\n            offerings: ritual.offerings.map(o => o.name),\r\n            divineResponse: outcome.godResponse\r\n        });\r\n\r\n        return outcome;\r\n    }\r\n\r\n    // Calculate ritual outcome\r\n    private calculateRitualOutcome(ritual: ActiveRitual): RitualOutcome {\r\n        const totalValue = ritual.offerings.reduce((sum, offering) => sum + offering.value, 0);\r\n        const avgValue = totalValue / ritual.offerings.length;\r\n\r\n        // Base success chance based on ritual difficulty and offerings\r\n        let successChance = Math.min(0.9, Math.max(0.1, (avgValue / 100) * (1 - ritual.ritual.difficulty * 0.1)));\r\n\r\n        // Bonus for god affinity\r\n        if (ritual.ritual.godAffinity.includes('all') || ritual.ritual.godAffinity.includes(ritual.godId)) {\r\n            successChance += 0.2;\r\n        }\r\n\r\n        const success = Math.random() < successChance;\r\n        const relationshipChange = success ? Math.floor(Math.random() * 20) + 10 : -Math.floor(Math.random() * 15) - 5;\r\n\r\n        if (success) {\r\n            return {\r\n                success: true,\r\n                message: `The ritual succeeds! ${ritual.ritual.name} has granted you divine favor.`,\r\n                effects: ritual.ritual.rewards,\r\n                rewards: ritual.ritual.rewards,\r\n                penalties: [],\r\n                godResponse: this.generateGodResponse(ritual, true),\r\n                relationshipChange,\r\n                memoryContent: `Successfully completed ${ritual.ritual.name} ritual with ${ritual.offerings.length} offerings.`,\r\n                importance: 9\r\n            };\r\n        } else {\r\n            return {\r\n                success: false,\r\n                message: `The ritual fails! ${ritual.ritual.name} has rejected your offerings.`,\r\n                effects: ritual.ritual.risks,\r\n                rewards: [],\r\n                penalties: ritual.ritual.risks,\r\n                godResponse: this.generateGodResponse(ritual, false),\r\n                relationshipChange,\r\n                memoryContent: `Failed to complete ${ritual.ritual.name} ritual. The gods are displeased.`,\r\n                importance: 7\r\n            };\r\n        }\r\n    }\r\n\r\n    // Generate god response to ritual\r\n    private generateGodResponse(ritual: ActiveRitual, success: boolean): string {\r\n        const responses = {\r\n            'offering': {\r\n                success: [\r\n                    'Your offerings please me, mortal. I shall grant you the wisdom you seek.',\r\n                    'These gifts are worthy of divine attention. You have earned my favor.',\r\n                    'Your devotion is noted. I shall bestow upon you the knowledge you desire.'\r\n                ],\r\n                failure: [\r\n                    'Your offerings are insufficient. You must give more to gain divine favor.',\r\n                    'These gifts do not meet my standards. Try again with better offerings.',\r\n                    'Your devotion is weak. I shall not grant you what you seek.'\r\n                ]\r\n            },\r\n            'summoning': {\r\n                success: [\r\n                    'You have successfully summoned my presence. Speak your mind, mortal.',\r\n                    'The ritual calls and I answer. What wisdom do you seek from me?',\r\n                    'Your summoning is powerful. I am here to guide you.'\r\n                ],\r\n                failure: [\r\n                    'Your summoning is weak. I shall not answer such a feeble call.',\r\n                    'The ritual is flawed. You must perfect your technique.',\r\n                    'I sense no true devotion in your summoning. Try again.'\r\n                ]\r\n            },\r\n            'divine-quest': {\r\n                success: [\r\n                    'You have proven yourself worthy. I shall grant you a sacred quest.',\r\n                    'Your courage impresses me. I shall test you with divine challenges.',\r\n                    'You are ready for the trials ahead. Accept my quest with honor.'\r\n                ],\r\n                failure: [\r\n                    'You are not yet ready for divine quests. Grow stronger first.',\r\n                    'Your heart is not pure enough for sacred missions. Purify yourself.',\r\n                    'I see no true calling in you. Return when you are worthy.'\r\n                ]\r\n            }\r\n        };\r\n\r\n        const ritualType = ritual.ritual.type as keyof typeof responses;\r\n        const responseType = success ? 'success' : 'failure';\r\n\r\n        if (responses[ritualType]) {\r\n            const typeResponses = responses[ritualType][responseType];\r\n            return typeResponses[Math.floor(Math.random() * typeResponses.length)];\r\n        }\r\n\r\n        return success ? 'The ritual succeeds beyond expectations!' : 'The ritual fails miserably.';\r\n    }\r\n\r\n    // Get ritual recommendations for a god\r\n    getRitualRecommendations(godId: string): Ritual[] {\r\n        return this.rituals.filter(ritual =>\r\n            ritual.godAffinity.includes('all') || ritual.godAffinity.includes(godId)\r\n        );\r\n    }\r\n\r\n    // Get offering recommendations for a ritual\r\n    getOfferingRecommendations(ritualType: Ritual['type']): RitualOffer[] {\r\n        const typeMap: Record<string, RitualOffer['type'][]> = {\r\n            'offering': ['material', 'sacred'],\r\n            'summoning': ['spiritual', 'sacred'],\r\n            'divine-quest': ['sacred', 'material'],\r\n            'purification': ['spiritual', 'sacred'],\r\n            'corruption': ['corrupt', 'digital'],\r\n            'glitch': ['digital', 'corrupt']\r\n        };\r\n\r\n        const preferredTypes = typeMap[ritualType] || ['material', 'spiritual'];\r\n        return this.offerings.filter(offering => preferredTypes.includes(offering.type));\r\n    }\r\n}\r\n\r\n// Export singleton instance\r\nexport const ritualService = new RitualService();\r\nexport default ritualService;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}