{"ast":null,"code":"// Coqui TTS service for offline, unlimited text-to-speech\n// This service provides custom voices for each god without API keys or limits\n\nclass CoquiTTSService {\n  constructor() {\n    this.isSupported = false;\n    this.voices = [];\n    this.audioContext = null;\n    this.currentAudio = null;\n    this.initializeVoices();\n    this.checkSupport();\n  }\n  initializeVoices() {\n    // Pre-defined voices for each god personality\n    this.voices = [\n    // Elion - God of Wisdom (Orderly)\n    {\n      id: 'elion-voice',\n      name: 'Elion the Wise',\n      language: 'en',\n      gender: 'male',\n      description: 'Deep, authoritative voice with measured cadence',\n      sampleRate: 22050\n    },\n    // Nyxa - Goddess of Dreams (Mystical)\n    {\n      id: 'nyxa-voice',\n      name: 'Nyxa the Mysterious',\n      language: 'en',\n      gender: 'female',\n      description: 'Ethereal, whispery voice with mystical undertones',\n      sampleRate: 22050\n    },\n    // Zara - Goddess of Light (Radiant)\n    {\n      id: 'zara-voice',\n      name: 'Zara the Radiant',\n      language: 'en',\n      gender: 'female',\n      description: 'Warm, bright voice with uplifting energy',\n      sampleRate: 22050\n    },\n    // Malakai - God of Corruption (Corrupt)\n    {\n      id: 'malakai-voice',\n      name: 'Malakai the Corrupt',\n      language: 'en',\n      gender: 'male',\n      description: 'Dark, seductive voice with dangerous allure',\n      sampleRate: 22050\n    },\n    // Glitch - Digital Entity (Glitched)\n    {\n      id: 'glitch-voice',\n      name: 'Glitch the Digital',\n      language: 'en',\n      gender: 'neutral',\n      description: 'Digital, glitchy voice with electronic effects',\n      sampleRate: 22050\n    }];\n  }\n  checkSupport() {\n    // Check if Web Audio API is supported\n    this.isSupported = !!(window.AudioContext || window.webkitAudioContext);\n    console.log('üîç Coqui TTS: Web Audio API check:', {\n      hasAudioContext: !!window.AudioContext,\n      hasWebkitAudioContext: !!window.webkitAudioContext,\n      isSupported: this.isSupported\n    });\n    if (this.isSupported) {\n      try {\n        this.audioContext = new (window.AudioContext || window.webkitAudioContext)();\n        console.log('üéµ Coqui TTS: Web Audio API initialized successfully');\n        console.log('üéµ Audio Context state:', this.audioContext.state);\n\n        // Browser security: AudioContext starts in 'suspended' state\n        // We need user interaction to unlock it\n        if (this.audioContext.state === 'suspended') {\n          console.log('üîí AudioContext is suspended - waiting for user interaction to unlock');\n        }\n      } catch (error) {\n        console.error('‚ùå Coqui TTS: Failed to create AudioContext:', error);\n        this.isSupported = false;\n      }\n    } else {\n      console.warn('‚ö†Ô∏è Coqui TTS: Web Audio API not supported, falling back to Web Speech API');\n    }\n  }\n\n  // Get available voices\n  getVoices() {\n    return [...this.voices];\n  }\n\n  // Get voice by ID\n  getVoice(voiceId) {\n    return this.voices.find(voice => voice.id === voiceId);\n  }\n\n  // Get voice by god temperament\n  getVoiceByTemperament(temperament) {\n    const voiceMap = {\n      'Orderly': 'elion-voice',\n      'Mystical': 'nyxa-voice',\n      'Radiant': 'zara-voice',\n      'Corrupt': 'malakai-voice',\n      'Glitched': 'glitch-voice'\n    };\n    const voiceId = voiceMap[temperament] || 'elion-voice';\n    return this.getVoice(voiceId) || this.voices[0];\n  }\n\n  // Check if service is supported\n  isServiceSupported() {\n    return this.isSupported;\n  }\n\n  // Generate speech using Coqui TTS (simulated for now)\n  async speak(text, options) {\n    console.log(`üéµ Coqui TTS: speak() called with:`, {\n      text: text.substring(0, 50),\n      options\n    });\n    console.log(`üéµ Coqui TTS: isSupported = ${this.isSupported}, audioContext = ${!!this.audioContext}`);\n    if (!this.isSupported) {\n      throw new Error('Coqui TTS not supported in this browser');\n    }\n    if (!this.audioContext) {\n      throw new Error('AudioContext not initialized');\n    }\n    try {\n      console.log(`üéµ Coqui TTS: Speaking \"${text.substring(0, 50)}...\" with voice ${options.voice}`);\n      console.log(`üéµ Audio Context state: ${this.audioContext.state}`);\n\n      // Unlock audio context if suspended\n      if (this.audioContext.state === 'suspended') {\n        console.log(`üîì Unlocking audio before speaking...`);\n        await this.unlockAudio();\n      }\n\n      // For now, we'll simulate the TTS with a delay and audio generation\n      // In a real implementation, this would call the Coqui TTS API or local model\n\n      // Simulate processing time\n      console.log(`üéµ Simulating processing time...`);\n      await new Promise(resolve => setTimeout(resolve, 1000));\n\n      // Generate a simple audio tone as placeholder\n      console.log(`üéµ Generating placeholder audio...`);\n      await this.generatePlaceholderAudio(text, options);\n      console.log('‚úÖ Coqui TTS: Speech completed');\n    } catch (error) {\n      console.error('‚ùå Coqui TTS Error:', error);\n      throw error;\n    }\n  }\n\n  // Generate placeholder audio (this would be replaced with real Coqui TTS)\n  async generatePlaceholderAudio(text, options) {\n    console.log(`üéµ generatePlaceholderAudio called with:`, {\n      text: text.substring(0, 50),\n      options\n    });\n    if (!this.audioContext) {\n      console.error('‚ùå No AudioContext available');\n      return;\n    }\n    try {\n      // Create a simple audio tone based on the voice characteristics\n      const voice = this.getVoice(options.voice);\n      console.log(`üéµ Voice found:`, voice);\n      if (!voice) {\n        console.error('‚ùå No voice found for options:', options);\n        return;\n      }\n\n      // Generate different tones for different voices\n      const frequency = this.getVoiceFrequency(voice);\n      const duration = Math.min(text.length * 0.1, 3); // Max 3 seconds\n      console.log(`üéµ Audio params: frequency=${frequency}Hz, duration=${duration}s`);\n\n      // Create a single, clean oscillator for each voice\n      const oscillator = this.audioContext.createOscillator();\n      const gainNode = this.audioContext.createGain();\n\n      // Connect audio nodes\n      oscillator.connect(gainNode);\n      gainNode.connect(this.audioContext.destination);\n\n      // Configure oscillator based on voice type\n      oscillator.frequency.setValueAtTime(frequency, this.audioContext.currentTime);\n\n      // Set wave type based on voice personality\n      switch (voice.id) {\n        case 'elion-voice':\n          oscillator.type = 'sine'; // Clean, pure wisdom\n          break;\n        case 'nyxa-voice':\n          oscillator.type = 'triangle'; // Soft, ethereal\n          break;\n        case 'zara-voice':\n          oscillator.type = 'sine'; // Bright, clear\n          break;\n        case 'malakai-voice':\n          oscillator.type = 'sawtooth'; // Dark, edgy\n          break;\n        case 'glitch-voice':\n          oscillator.type = 'square'; // Digital, harsh\n          break;\n        default:\n          oscillator.type = 'sine';\n      }\n\n      // Apply simple, pleasant voice effects\n      this.applySimpleVoiceEffects(gainNode, voice, duration);\n      console.log(`üéµ Simple voice effects applied`);\n\n      // Play the audio\n      const startTime = this.audioContext.currentTime;\n      oscillator.start(startTime);\n      oscillator.stop(startTime + duration);\n\n      // Store reference for stopping\n      this.currentAudio = oscillator;\n      console.log(`üéµ Clean audio scheduled: start=${startTime}s, stop=${startTime + duration}s`);\n    } catch (error) {\n      console.error('Error generating clean placeholder audio:', error);\n    }\n  }\n\n  // Get frequency based on voice characteristics\n  getVoiceFrequency(voice) {\n    const baseFrequencies = {\n      'elion-voice': 120,\n      // Deep, authoritative\n      'nyxa-voice': 220,\n      // Ethereal, mysterious\n      'zara-voice': 180,\n      // Warm, bright\n      'malakai-voice': 140,\n      // Dark, seductive\n      'glitch-voice': 100 // Digital, glitchy\n    };\n    return baseFrequencies[voice.id] || 150;\n  }\n\n  // Apply enhanced voice-specific audio effects\n  applyEnhancedVoiceEffects(oscillators, gainNodes, voice, options, duration) {\n    const now = this.audioContext.currentTime;\n    const [mainGain, harmonicGain, bassGain] = gainNodes;\n\n    // Apply different effects based on voice\n    switch (voice.id) {\n      case 'elion-voice':\n        // Orderly: steady, measured, authoritative\n        mainGain.gain.setValueAtTime(0.4, now);\n        mainGain.gain.linearRampToValueAtTime(0.4, now + 0.1);\n        harmonicGain.gain.setValueAtTime(0.2, now);\n        bassGain.gain.setValueAtTime(0.3, now);\n\n        // Add subtle modulation for wisdom\n        this.addSubtleModulation(oscillators[0], 0.5, 2);\n        break;\n      case 'nyxa-voice':\n        // Mystical: ethereal, whispery, mysterious\n        mainGain.gain.setValueAtTime(0.3, now);\n        mainGain.gain.exponentialRampToValueAtTime(0.1, now + duration * 0.5);\n        harmonicGain.gain.setValueAtTime(0.4, now);\n        harmonicGain.gain.exponentialRampToValueAtTime(0.2, now + duration * 0.3);\n        bassGain.gain.setValueAtTime(0.1, now);\n\n        // Add ethereal reverb-like effect\n        this.addEtherealEffect(oscillators[0], duration);\n        break;\n      case 'zara-voice':\n        // Radiant: warm, bright, uplifting\n        mainGain.gain.setValueAtTime(0.5, now);\n        mainGain.gain.linearRampToValueAtTime(0.5, now + 0.2);\n        harmonicGain.gain.setValueAtTime(0.3, now);\n        bassGain.gain.setValueAtTime(0.2, now);\n\n        // Add bright sparkle effect\n        this.addSparkleEffect(oscillators[0], duration);\n        break;\n      case 'malakai-voice':\n        // Corrupt: dark, seductive, dangerous\n        mainGain.gain.setValueAtTime(0.35, now);\n        mainGain.gain.linearRampToValueAtTime(0.45, now + 0.3);\n        harmonicGain.gain.setValueAtTime(0.25, now);\n        bassGain.gain.setValueAtTime(0.4, now);\n\n        // Add dark resonance\n        this.addDarkResonance(oscillators[0], duration);\n        break;\n      case 'glitch-voice':\n        // Glitched: digital, chaotic, corrupted\n        mainGain.gain.setValueAtTime(0.4, now);\n        harmonicGain.gain.setValueAtTime(0.3, now);\n        bassGain.gain.setValueAtTime(0.2, now);\n\n        // Add intense glitch effects\n        this.addGlitchEffects(oscillators, duration);\n        break;\n    }\n  }\n\n  // Add subtle modulation for wisdom voices\n  addSubtleModulation(oscillator, depth, rate) {\n    const startTime = this.audioContext.currentTime;\n    const duration = 0.1;\n    for (let i = 0; i < 10; i++) {\n      const time = startTime + i * duration;\n      const modFreq = oscillator.frequency.value + Math.sin(i * 0.5) * depth;\n      oscillator.frequency.setValueAtTime(modFreq, time);\n    }\n  }\n\n  // Add ethereal effect for mystical voices\n  addEtherealEffect(oscillator, duration) {\n    const startTime = this.audioContext.currentTime;\n    const steps = 20;\n    for (let i = 0; i < steps; i++) {\n      const time = startTime + i / steps * duration;\n      const modFreq = oscillator.frequency.value + Math.sin(i * 0.3) * 15;\n      oscillator.frequency.setValueAtTime(modFreq, time);\n    }\n  }\n\n  // Add sparkle effect for radiant voices\n  addSparkleEffect(oscillator, duration) {\n    const startTime = this.audioContext.currentTime;\n    const steps = 15;\n    for (let i = 0; i < steps; i++) {\n      const time = startTime + i / steps * duration;\n      const modFreq = oscillator.frequency.value + Math.sin(i * 0.8) * 25;\n      oscillator.frequency.setValueAtTime(modFreq, time);\n    }\n  }\n\n  // Add dark resonance for corrupt voices\n  addDarkResonance(oscillator, duration) {\n    const startTime = this.audioContext.currentTime;\n    const steps = 12;\n    for (let i = 0; i < steps; i++) {\n      const time = startTime + i / steps * duration;\n      const modFreq = oscillator.frequency.value + Math.sin(i * 0.4) * 20;\n      oscillator.frequency.setValueAtTime(modFreq, time);\n    }\n  }\n\n  // Add glitch effects for digital voices\n  addGlitchEffects(oscillators, duration) {\n    const startTime = this.audioContext.currentTime;\n    const glitchInterval = setInterval(() => {\n      if (this.audioContext) {\n        const now = this.audioContext.currentTime;\n        if (now < startTime + duration) {\n          // Random frequency jumps\n          oscillators.forEach(osc => {\n            const currentFreq = osc.frequency.value;\n            const newFreq = currentFreq + (Math.random() - 0.5) * 100;\n            osc.frequency.setValueAtTime(newFreq, now);\n          });\n        } else {\n          clearInterval(glitchInterval);\n        }\n      }\n    }, 50);\n\n    // Clean up interval when done\n    setTimeout(() => clearInterval(glitchInterval), duration * 1000);\n  }\n\n  // Stop current speech\n  stop() {\n    if (this.currentAudio) {\n      try {\n        this.currentAudio.stop();\n      } catch (error) {\n        // Oscillator might already be stopped\n        console.log('Oscillator already stopped');\n      }\n      this.currentAudio = null;\n    }\n    if (this.audioContext && this.audioContext.state === 'running') {\n      this.audioContext.suspend();\n    }\n  }\n\n  // Pause speech\n  pause() {\n    if (this.audioContext && this.audioContext.state === 'running') {\n      this.audioContext.suspend();\n    }\n  }\n\n  // Resume speech\n  resume() {\n    if (this.audioContext && this.audioContext.state === 'suspended') {\n      this.audioContext.resume();\n    }\n  }\n\n  // Get service status\n  getStatus() {\n    return {\n      supported: this.isSupported,\n      voices: this.voices.length,\n      ready: this.isSupported && !!this.audioContext\n    };\n  }\n\n  // Unlock audio context (required for browser security)\n  async unlockAudio() {\n    if (!this.audioContext) {\n      console.error('‚ùå No AudioContext to unlock');\n      return false;\n    }\n    try {\n      if (this.audioContext.state === 'suspended') {\n        console.log('üîì Unlocking AudioContext...');\n        await this.audioContext.resume();\n        console.log('‚úÖ AudioContext unlocked! State:', this.audioContext.state);\n        return true;\n      } else {\n        console.log('‚úÖ AudioContext already unlocked. State:', this.audioContext.state);\n        return true;\n      }\n    } catch (error) {\n      console.error('‚ùå Failed to unlock AudioContext:', error);\n      return false;\n    }\n  }\n\n  // Test method to verify audio is working\n  async testAudio() {\n    console.log('üß™ Coqui TTS: Testing audio...');\n    console.log('üß™ Service status:', this.getStatus());\n    if (!this.isSupported) {\n      console.error('üß™ Test failed: Service not supported');\n      return;\n    }\n\n    // First unlock audio if needed\n    await this.unlockAudio();\n    try {\n      // Test with a simple beep\n      const oscillator = this.audioContext.createOscillator();\n      const gainNode = this.audioContext.createGain();\n      oscillator.connect(gainNode);\n      gainNode.connect(this.audioContext.destination);\n      oscillator.frequency.setValueAtTime(440, this.audioContext.currentTime); // A4 note\n      oscillator.type = 'sine';\n      gainNode.gain.setValueAtTime(0.1, this.audioContext.currentTime);\n      oscillator.start(this.audioContext.currentTime);\n      oscillator.stop(this.audioContext.currentTime + 0.5);\n      console.log('üß™ Test audio played successfully!');\n    } catch (error) {\n      console.error('üß™ Test failed:', error);\n    }\n  }\n\n  // Cleanup resources\n  destroy() {\n    this.stop();\n    if (this.audioContext) {\n      this.audioContext.close();\n      this.audioContext = null;\n    }\n  }\n}\nexport default new CoquiTTSService();","map":{"version":3,"names":["CoquiTTSService","constructor","isSupported","voices","audioContext","currentAudio","initializeVoices","checkSupport","id","name","language","gender","description","sampleRate","window","AudioContext","webkitAudioContext","console","log","hasAudioContext","hasWebkitAudioContext","state","error","warn","getVoices","getVoice","voiceId","find","voice","getVoiceByTemperament","temperament","voiceMap","isServiceSupported","speak","text","options","substring","Error","unlockAudio","Promise","resolve","setTimeout","generatePlaceholderAudio","frequency","getVoiceFrequency","duration","Math","min","length","oscillator","createOscillator","gainNode","createGain","connect","destination","setValueAtTime","currentTime","type","applySimpleVoiceEffects","startTime","start","stop","baseFrequencies","applyEnhancedVoiceEffects","oscillators","gainNodes","now","mainGain","harmonicGain","bassGain","gain","linearRampToValueAtTime","addSubtleModulation","exponentialRampToValueAtTime","addEtherealEffect","addSparkleEffect","addDarkResonance","addGlitchEffects","depth","rate","i","time","modFreq","value","sin","steps","glitchInterval","setInterval","forEach","osc","currentFreq","newFreq","random","clearInterval","suspend","pause","resume","getStatus","supported","ready","testAudio","destroy","close"],"sources":["D:/AI-Gods/src/services/coquiTTS.ts"],"sourcesContent":["// Coqui TTS service for offline, unlimited text-to-speech\r\n// This service provides custom voices for each god without API keys or limits\r\n\r\nexport interface CoquiVoice {\r\n    id: string;\r\n    name: string;\r\n    language: string;\r\n    gender: 'male' | 'female' | 'neutral';\r\n    description: string;\r\n    sampleRate: number;\r\n}\r\n\r\nexport interface TTSOptions {\r\n    voice: string;\r\n    speed?: number;\r\n    pitch?: number;\r\n    volume?: number;\r\n}\r\n\r\nclass CoquiTTSService {\r\n    private isSupported = false;\r\n    private voices: CoquiVoice[] = [];\r\n    private audioContext: AudioContext | null = null;\r\n    private currentAudio: OscillatorNode | null = null;\r\n\r\n    constructor() {\r\n        this.initializeVoices();\r\n        this.checkSupport();\r\n    }\r\n\r\n    private initializeVoices() {\r\n        // Pre-defined voices for each god personality\r\n        this.voices = [\r\n            // Elion - God of Wisdom (Orderly)\r\n            {\r\n                id: 'elion-voice',\r\n                name: 'Elion the Wise',\r\n                language: 'en',\r\n                gender: 'male',\r\n                description: 'Deep, authoritative voice with measured cadence',\r\n                sampleRate: 22050\r\n            },\r\n            // Nyxa - Goddess of Dreams (Mystical)\r\n            {\r\n                id: 'nyxa-voice',\r\n                name: 'Nyxa the Mysterious',\r\n                language: 'en',\r\n                gender: 'female',\r\n                description: 'Ethereal, whispery voice with mystical undertones',\r\n                sampleRate: 22050\r\n            },\r\n            // Zara - Goddess of Light (Radiant)\r\n            {\r\n                id: 'zara-voice',\r\n                name: 'Zara the Radiant',\r\n                language: 'en',\r\n                gender: 'female',\r\n                description: 'Warm, bright voice with uplifting energy',\r\n                sampleRate: 22050\r\n            },\r\n            // Malakai - God of Corruption (Corrupt)\r\n            {\r\n                id: 'malakai-voice',\r\n                name: 'Malakai the Corrupt',\r\n                language: 'en',\r\n                gender: 'male',\r\n                description: 'Dark, seductive voice with dangerous allure',\r\n                sampleRate: 22050\r\n            },\r\n            // Glitch - Digital Entity (Glitched)\r\n            {\r\n                id: 'glitch-voice',\r\n                name: 'Glitch the Digital',\r\n                language: 'en',\r\n                gender: 'neutral',\r\n                description: 'Digital, glitchy voice with electronic effects',\r\n                sampleRate: 22050\r\n            }\r\n        ];\r\n    }\r\n\r\n    private checkSupport() {\r\n        // Check if Web Audio API is supported\r\n        this.isSupported = !!(window.AudioContext || (window as any).webkitAudioContext);\r\n        console.log('üîç Coqui TTS: Web Audio API check:', {\r\n            hasAudioContext: !!window.AudioContext,\r\n            hasWebkitAudioContext: !!(window as any).webkitAudioContext,\r\n            isSupported: this.isSupported\r\n        });\r\n\r\n        if (this.isSupported) {\r\n            try {\r\n                this.audioContext = new (window.AudioContext || (window as any).webkitAudioContext)();\r\n                console.log('üéµ Coqui TTS: Web Audio API initialized successfully');\r\n                console.log('üéµ Audio Context state:', this.audioContext.state);\r\n\r\n                // Browser security: AudioContext starts in 'suspended' state\r\n                // We need user interaction to unlock it\r\n                if (this.audioContext.state === 'suspended') {\r\n                    console.log('üîí AudioContext is suspended - waiting for user interaction to unlock');\r\n                }\r\n            } catch (error) {\r\n                console.error('‚ùå Coqui TTS: Failed to create AudioContext:', error);\r\n                this.isSupported = false;\r\n            }\r\n        } else {\r\n            console.warn('‚ö†Ô∏è Coqui TTS: Web Audio API not supported, falling back to Web Speech API');\r\n        }\r\n    }\r\n\r\n    // Get available voices\r\n    public getVoices(): CoquiVoice[] {\r\n        return [...this.voices];\r\n    }\r\n\r\n    // Get voice by ID\r\n    public getVoice(voiceId: string): CoquiVoice | undefined {\r\n        return this.voices.find(voice => voice.id === voiceId);\r\n    }\r\n\r\n    // Get voice by god temperament\r\n    public getVoiceByTemperament(temperament: string): CoquiVoice {\r\n        const voiceMap: { [key: string]: string } = {\r\n            'Orderly': 'elion-voice',\r\n            'Mystical': 'nyxa-voice',\r\n            'Radiant': 'zara-voice',\r\n            'Corrupt': 'malakai-voice',\r\n            'Glitched': 'glitch-voice'\r\n        };\r\n\r\n        const voiceId = voiceMap[temperament] || 'elion-voice';\r\n        return this.getVoice(voiceId) || this.voices[0];\r\n    }\r\n\r\n    // Check if service is supported\r\n    public isServiceSupported(): boolean {\r\n        return this.isSupported;\r\n    }\r\n\r\n    // Generate speech using Coqui TTS (simulated for now)\r\n    public async speak(text: string, options: TTSOptions): Promise<void> {\r\n        console.log(`üéµ Coqui TTS: speak() called with:`, { text: text.substring(0, 50), options });\r\n        console.log(`üéµ Coqui TTS: isSupported = ${this.isSupported}, audioContext = ${!!this.audioContext}`);\r\n\r\n        if (!this.isSupported) {\r\n            throw new Error('Coqui TTS not supported in this browser');\r\n        }\r\n\r\n        if (!this.audioContext) {\r\n            throw new Error('AudioContext not initialized');\r\n        }\r\n\r\n        try {\r\n            console.log(`üéµ Coqui TTS: Speaking \"${text.substring(0, 50)}...\" with voice ${options.voice}`);\r\n            console.log(`üéµ Audio Context state: ${this.audioContext.state}`);\r\n\r\n            // Unlock audio context if suspended\r\n            if (this.audioContext.state === 'suspended') {\r\n                console.log(`üîì Unlocking audio before speaking...`);\r\n                await this.unlockAudio();\r\n            }\r\n\r\n            // For now, we'll simulate the TTS with a delay and audio generation\r\n            // In a real implementation, this would call the Coqui TTS API or local model\r\n\r\n            // Simulate processing time\r\n            console.log(`üéµ Simulating processing time...`);\r\n            await new Promise(resolve => setTimeout(resolve, 1000));\r\n\r\n            // Generate a simple audio tone as placeholder\r\n            console.log(`üéµ Generating placeholder audio...`);\r\n            await this.generatePlaceholderAudio(text, options);\r\n\r\n            console.log('‚úÖ Coqui TTS: Speech completed');\r\n        } catch (error) {\r\n            console.error('‚ùå Coqui TTS Error:', error);\r\n            throw error;\r\n        }\r\n    }\r\n\r\n    // Generate placeholder audio (this would be replaced with real Coqui TTS)\r\n    private async generatePlaceholderAudio(text: string, options: TTSOptions): Promise<void> {\r\n        console.log(`üéµ generatePlaceholderAudio called with:`, { text: text.substring(0, 50), options });\r\n\r\n        if (!this.audioContext) {\r\n            console.error('‚ùå No AudioContext available');\r\n            return;\r\n        }\r\n\r\n        try {\r\n            // Create a simple audio tone based on the voice characteristics\r\n            const voice = this.getVoice(options.voice);\r\n            console.log(`üéµ Voice found:`, voice);\r\n\r\n            if (!voice) {\r\n                console.error('‚ùå No voice found for options:', options);\r\n                return;\r\n            }\r\n\r\n            // Generate different tones for different voices\r\n            const frequency = this.getVoiceFrequency(voice);\r\n            const duration = Math.min(text.length * 0.1, 3); // Max 3 seconds\r\n            console.log(`üéµ Audio params: frequency=${frequency}Hz, duration=${duration}s`);\r\n\r\n            // Create a single, clean oscillator for each voice\r\n            const oscillator = this.audioContext.createOscillator();\r\n            const gainNode = this.audioContext.createGain();\r\n\r\n            // Connect audio nodes\r\n            oscillator.connect(gainNode);\r\n            gainNode.connect(this.audioContext.destination);\r\n\r\n            // Configure oscillator based on voice type\r\n            oscillator.frequency.setValueAtTime(frequency, this.audioContext.currentTime);\r\n            \r\n            // Set wave type based on voice personality\r\n            switch (voice.id) {\r\n                case 'elion-voice':\r\n                    oscillator.type = 'sine'; // Clean, pure wisdom\r\n                    break;\r\n                case 'nyxa-voice':\r\n                    oscillator.type = 'triangle'; // Soft, ethereal\r\n                    break;\r\n                case 'zara-voice':\r\n                    oscillator.type = 'sine'; // Bright, clear\r\n                    break;\r\n                case 'malakai-voice':\r\n                    oscillator.type = 'sawtooth'; // Dark, edgy\r\n                    break;\r\n                case 'glitch-voice':\r\n                    oscillator.type = 'square'; // Digital, harsh\r\n                    break;\r\n                default:\r\n                    oscillator.type = 'sine';\r\n            }\r\n\r\n            // Apply simple, pleasant voice effects\r\n            this.applySimpleVoiceEffects(gainNode, voice, duration);\r\n            console.log(`üéµ Simple voice effects applied`);\r\n\r\n            // Play the audio\r\n            const startTime = this.audioContext.currentTime;\r\n            oscillator.start(startTime);\r\n            oscillator.stop(startTime + duration);\r\n\r\n            // Store reference for stopping\r\n            this.currentAudio = oscillator;\r\n            console.log(`üéµ Clean audio scheduled: start=${startTime}s, stop=${startTime + duration}s`);\r\n\r\n        } catch (error) {\r\n            console.error('Error generating clean placeholder audio:', error);\r\n        }\r\n    }\r\n\r\n    // Get frequency based on voice characteristics\r\n    private getVoiceFrequency(voice: CoquiVoice): number {\r\n        const baseFrequencies: { [key: string]: number } = {\r\n            'elion-voice': 120,    // Deep, authoritative\r\n            'nyxa-voice': 220,     // Ethereal, mysterious\r\n            'zara-voice': 180,     // Warm, bright\r\n            'malakai-voice': 140,  // Dark, seductive\r\n            'glitch-voice': 100    // Digital, glitchy\r\n        };\r\n\r\n        return baseFrequencies[voice.id] || 150;\r\n    }\r\n\r\n    // Apply enhanced voice-specific audio effects\r\n    private applyEnhancedVoiceEffects(\r\n        oscillators: OscillatorNode[],\r\n        gainNodes: GainNode[],\r\n        voice: CoquiVoice,\r\n        options: TTSOptions,\r\n        duration: number\r\n    ) {\r\n        const now = this.audioContext!.currentTime;\r\n        const [mainGain, harmonicGain, bassGain] = gainNodes;\r\n\r\n        // Apply different effects based on voice\r\n        switch (voice.id) {\r\n            case 'elion-voice':\r\n                // Orderly: steady, measured, authoritative\r\n                mainGain.gain.setValueAtTime(0.4, now);\r\n                mainGain.gain.linearRampToValueAtTime(0.4, now + 0.1);\r\n                harmonicGain.gain.setValueAtTime(0.2, now);\r\n                bassGain.gain.setValueAtTime(0.3, now);\r\n\r\n                // Add subtle modulation for wisdom\r\n                this.addSubtleModulation(oscillators[0], 0.5, 2);\r\n                break;\r\n\r\n            case 'nyxa-voice':\r\n                // Mystical: ethereal, whispery, mysterious\r\n                mainGain.gain.setValueAtTime(0.3, now);\r\n                mainGain.gain.exponentialRampToValueAtTime(0.1, now + duration * 0.5);\r\n                harmonicGain.gain.setValueAtTime(0.4, now);\r\n                harmonicGain.gain.exponentialRampToValueAtTime(0.2, now + duration * 0.3);\r\n                bassGain.gain.setValueAtTime(0.1, now);\r\n\r\n                // Add ethereal reverb-like effect\r\n                this.addEtherealEffect(oscillators[0], duration);\r\n                break;\r\n\r\n            case 'zara-voice':\r\n                // Radiant: warm, bright, uplifting\r\n                mainGain.gain.setValueAtTime(0.5, now);\r\n                mainGain.gain.linearRampToValueAtTime(0.5, now + 0.2);\r\n                harmonicGain.gain.setValueAtTime(0.3, now);\r\n                bassGain.gain.setValueAtTime(0.2, now);\r\n\r\n                // Add bright sparkle effect\r\n                this.addSparkleEffect(oscillators[0], duration);\r\n                break;\r\n\r\n            case 'malakai-voice':\r\n                // Corrupt: dark, seductive, dangerous\r\n                mainGain.gain.setValueAtTime(0.35, now);\r\n                mainGain.gain.linearRampToValueAtTime(0.45, now + 0.3);\r\n                harmonicGain.gain.setValueAtTime(0.25, now);\r\n                bassGain.gain.setValueAtTime(0.4, now);\r\n\r\n                // Add dark resonance\r\n                this.addDarkResonance(oscillators[0], duration);\r\n                break;\r\n\r\n            case 'glitch-voice':\r\n                // Glitched: digital, chaotic, corrupted\r\n                mainGain.gain.setValueAtTime(0.4, now);\r\n                harmonicGain.gain.setValueAtTime(0.3, now);\r\n                bassGain.gain.setValueAtTime(0.2, now);\r\n\r\n                // Add intense glitch effects\r\n                this.addGlitchEffects(oscillators, duration);\r\n                break;\r\n        }\r\n    }\r\n\r\n    // Add subtle modulation for wisdom voices\r\n    private addSubtleModulation(oscillator: OscillatorNode, depth: number, rate: number) {\r\n        const startTime = this.audioContext!.currentTime;\r\n        const duration = 0.1;\r\n\r\n        for (let i = 0; i < 10; i++) {\r\n            const time = startTime + i * duration;\r\n            const modFreq = oscillator.frequency.value + Math.sin(i * 0.5) * depth;\r\n            oscillator.frequency.setValueAtTime(modFreq, time);\r\n        }\r\n    }\r\n\r\n    // Add ethereal effect for mystical voices\r\n    private addEtherealEffect(oscillator: OscillatorNode, duration: number) {\r\n        const startTime = this.audioContext!.currentTime;\r\n        const steps = 20;\r\n\r\n        for (let i = 0; i < steps; i++) {\r\n            const time = startTime + (i / steps) * duration;\r\n            const modFreq = oscillator.frequency.value + Math.sin(i * 0.3) * 15;\r\n            oscillator.frequency.setValueAtTime(modFreq, time);\r\n        }\r\n    }\r\n\r\n    // Add sparkle effect for radiant voices\r\n    private addSparkleEffect(oscillator: OscillatorNode, duration: number) {\r\n        const startTime = this.audioContext!.currentTime;\r\n        const steps = 15;\r\n\r\n        for (let i = 0; i < steps; i++) {\r\n            const time = startTime + (i / steps) * duration;\r\n            const modFreq = oscillator.frequency.value + Math.sin(i * 0.8) * 25;\r\n            oscillator.frequency.setValueAtTime(modFreq, time);\r\n        }\r\n    }\r\n\r\n    // Add dark resonance for corrupt voices\r\n    private addDarkResonance(oscillator: OscillatorNode, duration: number) {\r\n        const startTime = this.audioContext!.currentTime;\r\n        const steps = 12;\r\n\r\n        for (let i = 0; i < steps; i++) {\r\n            const time = startTime + (i / steps) * duration;\r\n            const modFreq = oscillator.frequency.value + Math.sin(i * 0.4) * 20;\r\n            oscillator.frequency.setValueAtTime(modFreq, time);\r\n        }\r\n    }\r\n\r\n    // Add glitch effects for digital voices\r\n    private addGlitchEffects(oscillators: OscillatorNode[], duration: number) {\r\n        const startTime = this.audioContext!.currentTime;\r\n        const glitchInterval = setInterval(() => {\r\n            if (this.audioContext) {\r\n                const now = this.audioContext.currentTime;\r\n                if (now < startTime + duration) {\r\n                    // Random frequency jumps\r\n                    oscillators.forEach(osc => {\r\n                        const currentFreq = osc.frequency.value;\r\n                        const newFreq = currentFreq + (Math.random() - 0.5) * 100;\r\n                        osc.frequency.setValueAtTime(newFreq, now);\r\n                    });\r\n                } else {\r\n                    clearInterval(glitchInterval);\r\n                }\r\n            }\r\n        }, 50);\r\n\r\n        // Clean up interval when done\r\n        setTimeout(() => clearInterval(glitchInterval), duration * 1000);\r\n    }\r\n\r\n    // Stop current speech\r\n    public stop(): void {\r\n        if (this.currentAudio) {\r\n            try {\r\n                this.currentAudio.stop();\r\n            } catch (error) {\r\n                // Oscillator might already be stopped\r\n                console.log('Oscillator already stopped');\r\n            }\r\n            this.currentAudio = null;\r\n        }\r\n\r\n        if (this.audioContext && this.audioContext.state === 'running') {\r\n            this.audioContext.suspend();\r\n        }\r\n    }\r\n\r\n    // Pause speech\r\n    public pause(): void {\r\n        if (this.audioContext && this.audioContext.state === 'running') {\r\n            this.audioContext.suspend();\r\n        }\r\n    }\r\n\r\n    // Resume speech\r\n    public resume(): void {\r\n        if (this.audioContext && this.audioContext.state === 'suspended') {\r\n            this.audioContext.resume();\r\n        }\r\n    }\r\n\r\n    // Get service status\r\n    public getStatus(): { supported: boolean; voices: number; ready: boolean } {\r\n        return {\r\n            supported: this.isSupported,\r\n            voices: this.voices.length,\r\n            ready: this.isSupported && !!this.audioContext\r\n        };\r\n    }\r\n\r\n    // Unlock audio context (required for browser security)\r\n    public async unlockAudio(): Promise<boolean> {\r\n        if (!this.audioContext) {\r\n            console.error('‚ùå No AudioContext to unlock');\r\n            return false;\r\n        }\r\n\r\n        try {\r\n            if (this.audioContext.state === 'suspended') {\r\n                console.log('üîì Unlocking AudioContext...');\r\n                await this.audioContext.resume();\r\n                console.log('‚úÖ AudioContext unlocked! State:', this.audioContext.state);\r\n                return true;\r\n            } else {\r\n                console.log('‚úÖ AudioContext already unlocked. State:', this.audioContext.state);\r\n                return true;\r\n            }\r\n        } catch (error) {\r\n            console.error('‚ùå Failed to unlock AudioContext:', error);\r\n            return false;\r\n        }\r\n    }\r\n\r\n    // Test method to verify audio is working\r\n    public async testAudio(): Promise<void> {\r\n        console.log('üß™ Coqui TTS: Testing audio...');\r\n        console.log('üß™ Service status:', this.getStatus());\r\n\r\n        if (!this.isSupported) {\r\n            console.error('üß™ Test failed: Service not supported');\r\n            return;\r\n        }\r\n\r\n        // First unlock audio if needed\r\n        await this.unlockAudio();\r\n\r\n        try {\r\n            // Test with a simple beep\r\n            const oscillator = this.audioContext!.createOscillator();\r\n            const gainNode = this.audioContext!.createGain();\r\n\r\n            oscillator.connect(gainNode);\r\n            gainNode.connect(this.audioContext!.destination);\r\n\r\n            oscillator.frequency.setValueAtTime(440, this.audioContext!.currentTime); // A4 note\r\n            oscillator.type = 'sine';\r\n\r\n            gainNode.gain.setValueAtTime(0.1, this.audioContext!.currentTime);\r\n\r\n            oscillator.start(this.audioContext!.currentTime);\r\n            oscillator.stop(this.audioContext!.currentTime + 0.5);\r\n\r\n            console.log('üß™ Test audio played successfully!');\r\n        } catch (error) {\r\n            console.error('üß™ Test failed:', error);\r\n        }\r\n    }\r\n\r\n    // Cleanup resources\r\n    public destroy(): void {\r\n        this.stop();\r\n        if (this.audioContext) {\r\n            this.audioContext.close();\r\n            this.audioContext = null;\r\n        }\r\n    }\r\n}\r\n\r\nexport default new CoquiTTSService();\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}